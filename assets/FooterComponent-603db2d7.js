import{A as K,q as re,b as O,c as A,t as j,l as ne,j as S,e as M,m as P,F as ge,u as ye,r as oe,o as me,a as $e,d as X,g as E,f as ve,y as Q,p as Me,h as Se}from"./index-10f80346.js";const N=s=>K.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});async function we(s,l,a){try{return await N(a).post(s,l)}catch(u){return u.response}}async function be(s,l,a){try{return await N(a).get(s,l)}catch(u){return u.response}}async function De(s,l,a){try{return await N(a).patch(s,l)}catch(u){return u.response}}async function ke(s,l,a){try{return await N(a).delete(s,l)}catch(u){return u.response}}async function Oe(s,l,a){try{return await N(a).put(s,l)}catch(u){return u.response}}const ae=s=>K.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});async function Ce(s,l,a){try{return await ae(a).post(s,l)}catch(u){return u.response}}async function Te(s,l,a){try{return await ae(a).put(s,l)}catch(u){return u.response}}const ie={POST:we,GET:be,PATCH:De,DELETE:ke,PUT:Oe,formDataPOST:Ce,formDataPUT:Te},ue=re("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(s){this.errMessage=s},setSuccess(s){this.successMessage=s},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""}}}),xe=re("login",{state:()=>({loginSwitch:"login",isBuyer:!1,isSeller:!1,isUser:!1,buttonOn:!1,user:{},isSelfUser:""}),getters:{},actions:{setLoginSwitch(s){this.loginSwitch=s},setisBuyer(s){this.isBuyer=s},setisSeller(s){this.isSeller=s},setButtonOn(s){this.buttonOn=s},setIsUser(s){this.isUser=s}}});const J=(s,l)=>{const a=s.__vccOpts||s;for(const[u,m]of l)a[u]=m;return a},Be={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0},link:{type:String}},setup(s){return(l,a)=>(O(),A("button",{style:ne(s.backgroundColor)},j(s.msg),5))}},He=J(Be,[["__scopeId","data-v-05c7974f"]]);const Ie={key:0,class:"alert-wrapper"},Ae={class:"alert-message success-color"},Ue={class:"text"},Fe={key:1,class:"alert-wrapper"},Le={class:"alert-message error-color"},Ye={class:"text"},Ee={__name:"AlertComponent",setup(s){const l=ue();return(a,u)=>(O(),A(ge,null,[S(l).successMessage?(O(),A("div",Ie,[M("div",Ae,[M("div",Ue,j(S(l).successMessage),1),M("button",{type:"button",class:"close-button success-color",onClick:u[0]||(u[0]=(...m)=>S(l).clearSuccessMessages&&S(l).clearSuccessMessages(...m))},"X")])])):P("",!0),S(l).errMessage?(O(),A("div",Fe,[M("div",Le,[M("div",Ye,j(S(l).errMessage),1),M("button",{type:"button",class:"close-button error-color",onClick:u[1]||(u[1]=(...m)=>S(l).clearErrorMessages&&S(l).clearErrorMessages(...m))},"X")])])):P("",!0)],64))}},st=J(Ee,[["__scopeId","data-v-573cb71b"]]),ce=()=>{const s=localStorage.getItem("token");return K.defaults.headers.common.Authorization=`Bearer ${s}`,s},Pe=async()=>{try{const s=ce();return await ie.POST("/api/v1/users/tokenCheck",void 0,s)}catch(s){return s}},je={putTokenToHeader:ce,tokenCheck:Pe};const le=s=>(Me("data-v-0a4969b4"),s=s(),Se(),s),Ne={class:"title-wrapper"},We={class:"func-wrapper"},ze={class:"user-account"},Ve=le(()=>M("i",{class:"fa-solid fa-cart-shopping"},null,-1)),qe=le(()=>M("i",{class:"fa-solid fa-store"},null,-1)),Je={__name:"HeaderComponent",setup(s){const l=ye(),a=xe(),u=ue(),m=oe("");me(async()=>{const D=je.putTokenToHeader(),w=await ie.GET("/api/v1/users",void 0,D),{success:g,data:$}=w.data;g||(a.setisBuyer(!1),a.setisSeller(!1),a.setButtonOn(!1),a.setIsUser(!1),a.user="",m.value="login"),g&&$.user.role==="buyer"?(a.setisBuyer(!0),a.setisSeller(!1),a.setButtonOn(!0),a.setIsUser(!0),a.user=$.user,m.value="logout"):g&&$.user.role==="seller"&&(a.setisSeller(!0),a.setisBuyer(!1),a.setButtonOn(!1),a.setIsUser(!0),a.user=$.user,m.value="logout")});const U=()=>{m.value==="logout"&&(u.setSuccess("登出成功"),localStorage.removeItem("token"),l.push("/user/login"))};return(D,w)=>{const g=$e("router-link");return O(),A("header",null,[M("div",Ne,[X(g,{to:"/home",class:"title"},{default:E(()=>[ve("我的電商網站")]),_:1})]),M("div",We,[S(a).isUser?(O(),Q(g,{key:0,to:"/user/profile",class:"userPic"},{default:E(()=>[M("div",{class:"user-pic",style:ne(`background-image: url('${S(a).user.avatar}')`)},null,4),M("div",ze,j(S(a).user.account),1)]),_:1})):P("",!0),S(a).isBuyer?(O(),Q(g,{key:1,to:"/shopcars",class:"shopcarPic"},{default:E(()=>[Ve]),_:1})):P("",!0),S(a).isSeller?(O(),Q(g,{key:2,to:"/stores",class:"storePic"},{default:E(()=>[qe]),_:1})):P("",!0),X(g,{to:"/user/login",class:"user-login-wrapper",onClick:w[0]||(w[0]=$=>U())},{default:E(()=>[X(He,{msg:m.value,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},rt=J(Je,[["__scopeId","data-v-0a4969b4"]]);var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ge(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var de={exports:{}};(function(s,l){(function(a,u){s.exports=u()})(Ze,function(){var a=1e3,u=6e4,m=36e5,U="millisecond",D="second",w="minute",g="hour",$="day",W="week",b="month",ee="quarter",C="year",H="date",te="Invalid Date",fe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,he=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Z=function(n,r,e){var o=String(n);return!o||o.length>=r?n:""+Array(r+1-o.length).join(e)+n},_e={s:Z,z:function(n){var r=-n.utcOffset(),e=Math.abs(r),o=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+Z(o,2,"0")+":"+Z(t,2,"0")},m:function n(r,e){if(r.date()<e.date())return-n(e,r);var o=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(o,b),c=e-t<0,i=r.clone().add(o+(c?-1:1),b);return+(-(o+(e-t)/(c?t-i:i-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:b,y:C,w:W,d:$,D:H,h:g,m:w,s:D,ms:U,Q:ee}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},F="en",B={};B[F]=pe;var G=function(n){return n instanceof V},z=function(n,r,e){var o;if(!n)return F;if(typeof n=="string")B[n]&&(o=n),r&&(B[n]=r,o=n);else{var t=n.name;B[t]=n,o=t}return!e&&o&&(F=o),o||!e&&F},_=function(n,r){if(G(n))return n.clone();var e=typeof r=="object"?r:{};return e.date=n,e.args=arguments,new V(e)},d=_e;d.l=z,d.i=G,d.w=function(n,r){return _(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var V=function(){function n(e){this.$L=z(e.locale,null,!0),this.parse(e)}var r=n.prototype;return r.parse=function(e){this.$d=function(o){var t=o.date,c=o.utc;if(t===null)return new Date(NaN);if(d.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(fe);if(i){var f=i[2]-1||0,p=(i[7]||"0").substring(0,3);return c?new Date(Date.UTC(i[1],f,i[3]||1,i[4]||0,i[5]||0,i[6]||0,p)):new Date(i[1],f,i[3]||1,i[4]||0,i[5]||0,i[6]||0,p)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return d},r.isValid=function(){return this.$d.toString()!==te},r.isSame=function(e,o){var t=_(e);return this.startOf(o)<=t&&t<=this.endOf(o)},r.isAfter=function(e,o){return _(e)<this.startOf(o)},r.isBefore=function(e,o){return this.endOf(o)<_(e)},r.$g=function(e,o,t){return d.u(e)?this[o]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,o){var t=this,c=!!d.u(o)||o,i=d.p(e),f=function(I,v){var x=d.w(t.$u?Date.UTC(t.$y,v,I):new Date(t.$y,v,I),t);return c?x:x.endOf($)},p=function(I,v){return d.w(t.toDate()[I].apply(t.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(v)),t)},h=this.$W,y=this.$M,T=this.$D,k="set"+(this.$u?"UTC":"");switch(i){case C:return c?f(1,0):f(31,11);case b:return c?f(1,y):f(0,y+1);case W:var L=this.$locale().weekStart||0,Y=(h<L?h+7:h)-L;return f(c?T-Y:T+(6-Y),y);case $:case H:return p(k+"Hours",0);case g:return p(k+"Minutes",1);case w:return p(k+"Seconds",2);case D:return p(k+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,o){var t,c=d.p(e),i="set"+(this.$u?"UTC":""),f=(t={},t[$]=i+"Date",t[H]=i+"Date",t[b]=i+"Month",t[C]=i+"FullYear",t[g]=i+"Hours",t[w]=i+"Minutes",t[D]=i+"Seconds",t[U]=i+"Milliseconds",t)[c],p=c===$?this.$D+(o-this.$W):o;if(c===b||c===C){var h=this.clone().set(H,1);h.$d[f](p),h.init(),this.$d=h.set(H,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},r.set=function(e,o){return this.clone().$set(e,o)},r.get=function(e){return this[d.p(e)]()},r.add=function(e,o){var t,c=this;e=Number(e);var i=d.p(o),f=function(y){var T=_(c);return d.w(T.date(T.date()+Math.round(y*e)),c)};if(i===b)return this.set(b,this.$M+e);if(i===C)return this.set(C,this.$y+e);if(i===$)return f(1);if(i===W)return f(7);var p=(t={},t[w]=u,t[g]=m,t[D]=a,t)[i]||1,h=this.$d.getTime()+e*p;return d.w(h,this)},r.subtract=function(e,o){return this.add(-1*e,o)},r.format=function(e){var o=this,t=this.$locale();if(!this.isValid())return t.invalidDate||te;var c=e||"YYYY-MM-DDTHH:mm:ssZ",i=d.z(this),f=this.$H,p=this.$m,h=this.$M,y=t.weekdays,T=t.months,k=function(v,x,R,q){return v&&(v[x]||v(o,c))||R[x].substr(0,q)},L=function(v){return d.s(f%12||12,v,"0")},Y=t.meridiem||function(v,x,R){var q=v<12?"AM":"PM";return R?q.toLowerCase():q},I={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:d.s(h+1,2,"0"),MMM:k(t.monthsShort,h,T,3),MMMM:k(T,h),D:this.$D,DD:d.s(this.$D,2,"0"),d:String(this.$W),dd:k(t.weekdaysMin,this.$W,y,2),ddd:k(t.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(f),HH:d.s(f,2,"0"),h:L(1),hh:L(2),a:Y(f,p,!0),A:Y(f,p,!1),m:String(p),mm:d.s(p,2,"0"),s:String(this.$s),ss:d.s(this.$s,2,"0"),SSS:d.s(this.$ms,3,"0"),Z:i};return c.replace(he,function(v,x){return x||I[v]||i.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,o,t){var c,i=d.p(o),f=_(e),p=(f.utcOffset()-this.utcOffset())*u,h=this-f,y=d.m(this,f);return y=(c={},c[C]=y/12,c[b]=y,c[ee]=y/3,c[W]=(h-p)/6048e5,c[$]=(h-p)/864e5,c[g]=h/m,c[w]=h/u,c[D]=h/a,c)[i]||h,t?y:d.a(y)},r.daysInMonth=function(){return this.endOf(b).$D},r.$locale=function(){return B[this.$L]},r.locale=function(e,o){if(!e)return this.$L;var t=this.clone(),c=z(e,o,!0);return c&&(t.$L=c),t},r.clone=function(){return d.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n}(),se=V.prototype;return _.prototype=se,[["$ms",U],["$s",D],["$m",w],["$H",g],["$W",$],["$M",b],["$y",C],["$D",H]].forEach(function(n){se[n[1]]=function(r){return this.$g(r,n[0],n[1])}}),_.extend=function(n,r){return n.$i||(n(r,V,_),n.$i=!0),_},_.locale=z,_.isDayjs=G,_.unix=function(n){return _(1e3*n)},_.en=B[F],_.Ls=B,_.p={},_})})(de);var Re=de.exports;const Xe=Ge(Re);const Qe={class:"year-wrapper"},Ke={class:"year"},et={__name:"FooterComponent",setup(s){const l=oe(Xe().year());return(a,u)=>(O(),A("footer",null,[M("div",Qe,[M("span",Ke,"© 2022-"+j(l.value),1)])]))}},nt=J(et,[["__scopeId","data-v-b993e356"]]);export{st as A,He as B,nt as F,rt as H,J as _,xe as a,ie as b,je as t,ue as u};
