import{s as F,u as C,r as S,o as f,b as k,c as w,d as t,e as r,w as E,n as P,j as u,F as R,p as q,h as B}from"./index-917c549d.js";import{_ as M,u as H,a as I,b as h,H as D,A as T,B as V,F as A,t as L}from"./FooterComponent-537da39a.js";import{u as N}from"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-e320a571.js";import{F as i}from"./FormComponent-3343915d.js";const $=l=>(q("data-v-08402302"),l=l(),B(),l),j={class:"wrapper"},z={class:"form-wrapper"},G={class:"form-title"},U=$(()=>r("h3",null,"編輯商品",-1)),J=["onSubmit"],K={__name:"ProductEditPage",setup(l){const d=F(),m=C(),s=H(),e=N(),g=I();s.clearErrorMessages(),s.clearSuccessMessages();const v=S(""),x=()=>{v.value="was-validated"};f(()=>{if(g.user.role!=="seller")return m.push("/")}),f(async()=>{const a=d.params.product_id,n=await h.GET(`/api/v1/products/${a}`),{data:o,success:c,message:p}=n.data;if(!c)return s.setError(p);e.name=o.product.name,e.price=o.product.price,e.inventory=o.product.inventory_quantity,e.avatar=o.product.avatar,e.description=o.product.description});const b=a=>{const n=a.target.files[0];e.avatar=n},y=async a=>{if(!a.target.checkValidity())return a.preventDefault();const o=L.putTokenToHeader(),c=await h.formDataPUT(`/api/v1/stores/${d.params.product_id}`,{name:e.name,price:e.price,inventory:e.inventory,avatar:e.avatar,description:e.description},o),{success:p,message:_}=c.data;if(!p)return s.setError(_);s.setSuccess(_),m.push("/stores")};return(a,n)=>(k(),w(R,null,[t(D),r("div",j,[r("div",z,[r("div",G,[U,t(T)]),r("form",{onSubmit:E(y,["prevent"]),class:P(v.value),novalidate:""},[t(i,{"label-for":"name","label-text":"商品名稱","span-text":"※填寫1-100字商品名稱","input-placeholder":"請輸入商品名稱","input-type":"text","min-length":"1","max-length":"100",inputRequired:"true","invalid-text":"此項目為必填，字數限制1-100",value:u(e).name},null,8,["value"]),t(i,{"label-for":"price","label-text":"售價","span-text":"※注意售價為必填","input-placeholder":"請輸入售價","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填",value:u(e).price},null,8,["value"]),t(i,{"label-for":"inventory","label-text":"存貨量","span-text":"※注意存貨量為必填","input-placeholder":"請輸入存貨量","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填",value:u(e).inventory},null,8,["value"]),t(i,{"label-for":"avatar","label-text":"商品圖片","span-text":"※注意商品圖片為必填","input-placeholder":"",onChange:b,"input-type":"file",inputRequired:"true","invalid-text":"此項目為必填"}),t(i,{"label-for":"description","label-text":"商品描述","span-text":"※注意商品描述為必填","input-placeholder":"請輸入商品描述","input-type":"textarea","min-length":"1","max-length":"400",inputRequired:"true","invalid-text":"此項目為必填",value:u(e).description},null,8,["value"]),r("div",null,[t(V,{msg:"更新",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:x})])],42,J)])]),t(A)],64))}},Y=M(K,[["__scopeId","data-v-08402302"]]);export{Y as default};
