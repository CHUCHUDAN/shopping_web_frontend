import{x as ne,A as oe,a as k,c as F,t as N,l as ue,e as v,d as $,m as W,F as ye,o as $e,r as ve,b as te,g as z,y as se,p as we,h as Me,z as Se}from"./index-4a7e1513.js";const le=ne("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(e){this.errMessage=e},setSuccess(e){this.successMessage=e},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""},messageInitialization(e=[]){if(e.some(c=>this.successMessage===c))return this.clearErrorMessages();this.clearErrorMessages(),this.clearSuccessMessages()}}}),be=ne("form-store",{state:()=>({name:"",price:"",inventory:"",avatar:"",description:"",account:"",password:"",passwordCheck:"",passwordOld:"",role:"buyer",email:"",phone:"",category:"",defautCategory:"",formClass:""}),getters:{},actions:{setChangeInput(e,r){this[e]=r},addFormClass(){window.scrollTo({top:0,behavior:"smooth"}),this.formClass="was-validated"}}}),V=e=>oe.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});async function ke(e,r,c){try{return await V(c).post(e,r)}catch(o){return o.response}}async function De(e,r,c){try{return await V(c).get(e,r)}catch(o){return o.response}}async function Te(e,r,c){try{return await V(c).patch(e,r)}catch(o){return o.response}}async function Ce(e,r,c){try{return await V(c).delete(e,r)}catch(o){return o.response}}async function Oe(e,r,c){try{return await V(c).put(e,r)}catch(o){return o.response}}const de=e=>oe.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}});async function xe(e,r,c){try{return await de(c).post(e,r)}catch(o){return o.response}}async function He(e,r,c){try{return await de(c).put(e,r)}catch(o){return o.response}}const x={POST:ke,GET:De,PATCH:Te,DELETE:Ce,PUT:Oe,formDataPOST:xe,formDataPUT:He},fe=()=>{const e=localStorage.getItem("token");return oe.defaults.headers.common.Authorization=`Bearer ${e}`,e},Pe=async()=>{try{const e=fe();return await x.POST("/api/v1/users/tokenCheck",void 0,e)}catch(e){return e}},re={putTokenToHeader:fe,tokenCheck:Pe},M=le(),_=be(),Ee=ne("login",{state:()=>({isBuyer:!1,isSeller:!1,isUser:!1,cartButtonOn:!1,buttonText:"login",user:{},isSelfUser:""}),getters:{},actions:{async login(){const e=await x.POST("/api/v1/users/signin",{account:_.account,password:_.password}),{data:r,success:c,message:o}=e.data;if(!c)return M.setError(o),"err";localStorage.setItem("token",r.token),M.setSuccess("登入成功")},async authority(){const e=re.putTokenToHeader(),r=await x.GET("/api/v1/users",void 0,e),{success:c,data:o}=r.data;c||this.setLoginData(!1,!1,!1,!1,"","login"),c&&o.user.role==="buyer"?this.setLoginData(!0,!1,!0,!0,o.user,"logout"):c&&o.user.role==="seller"&&this.setLoginData(!1,!0,!0,!1,o.user,"logout")},logout(){this.buttonText==="logout"&&(M.setSuccess("登出成功"),localStorage.removeItem("token"),this.setLoginData(!1,!1,!1,!1,"","login"))},async register(){const e=await x.POST("/api/v1/user",{name:_.name,account:_.account,role:_.role,password:_.password,passwordCheck:_.passwordCheck}),{success:r,message:c}=e.data;if(!r)return M.setError(c),"err";M.setSuccess("註冊成功")},async putUser(){const e=re.putTokenToHeader(),r=await x.formDataPUT("/api/v1/users",{name:_.name,account:_.account,email:_.email,phone:_.phone,avatar:_.avatar},e),{success:c,message:o}=r.data;if(!c)return M.setError(o),"err";M.setSuccess(o)},async putUserPassword(){const e=re.putTokenToHeader(),r=await x.PUT("/api/v1/users/password",{passwordOld:_.passwordOld,password:_.password,passwordCheck:_.passwordCheck},e),{success:c,message:o}=r.data;if(!c)return M.setError(o),"err";M.setSuccess(o)},async mailToReset(){const e=await x.POST("/api/v1/users/forgetPassword",{email:_.email}),{success:r,message:c}=e.data;if(!r)return M.setError(c),"err";M.setSuccess(c)},async resetPassword(e){const r=await x.POST("/api/v1/users/resetPassword",{email:_.email,resetToken:e,password:_.password}),{success:c,message:o}=r.data;if(!c)return M.setError(o),"err";M.setSuccess(o)},setLoginData(e,r,c,o,m,P){this.isBuyer=e,this.isSeller=r,this.isUser=c,this.cartButtonOn=o,this.user=m,this.buttonText=P}}});const R=(e,r)=>{const c=e.__vccOpts||e;for(const[o,m]of r)c[o]=m;return c},Ie={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0}},setup(e){return(r,c)=>(k(),F("button",{style:ue(e.backgroundColor)},N(e.msg),5))}},Ae=R(Ie,[["__scopeId","data-v-bd44fc22"]]);const Be={key:0,class:"alert-wrapper"},Le={class:"alert-message success-color"},Fe={class:"text"},Ue={key:1,class:"alert-wrapper"},Ye={class:"alert-message error-color"},je={class:"text"},ze={__name:"AlertComponent",setup(e){const r=le();return(c,o)=>(k(),F(ye,null,[v(r).successMessage?(k(),F("div",Be,[$("div",Le,[$("div",Fe,N(v(r).successMessage),1),$("button",{type:"button",class:"close-button success-color",onClick:o[0]||(o[0]=(...m)=>v(r).clearSuccessMessages&&v(r).clearSuccessMessages(...m))},"X")])])):W("",!0),v(r).errMessage?(k(),F("div",Ue,[$("div",Ye,[$("div",je,N(v(r).errMessage),1),$("button",{type:"button",class:"close-button error-color",onClick:o[1]||(o[1]=(...m)=>v(r).clearErrorMessages&&v(r).clearErrorMessages(...m))},"X")])])):W("",!0)],64))}},at=R(ze,[["__scopeId","data-v-0df4cebf"]]),We="/shopping_web_frontend/assets/shark_logo-af2be115.png";const X=e=>(we("data-v-39235f8e"),e=e(),Me(),e),Ne={class:"title-wrapper"},Ve=X(()=>$("img",{class:"logo-img",src:We,alt:"圖片未正確顯示"},null,-1)),Je=X(()=>$("div",{class:"logo-text"},"丹尼購物",-1)),Ze={class:"func-wrapper"},qe={class:"user-account"},Ge=X(()=>$("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Re=X(()=>$("i",{class:"fa-solid fa-store"},null,-1)),Xe={__name:"HeaderComponent",setup(e){const r=Ee();return $e(async()=>{await r.authority()}),(c,o)=>{const m=ve("router-link");return k(),F("header",null,[$("div",Ne,[te(m,{to:"/",class:"title"},{default:z(()=>[Ve,Je]),_:1})]),$("div",Ze,[v(r).isUser?(k(),se(m,{key:0,to:"/user/profile",class:"userPic"},{default:z(()=>[$("div",{class:"user-pic",style:ue(`background-image: url('${v(r).user.avatar}')`)},null,4),$("div",qe,N(v(r).user.account),1)]),_:1})):W("",!0),v(r).isBuyer?(k(),se(m,{key:1,to:"/carts",class:"cartPic"},{default:z(()=>[Ge]),_:1})):W("",!0),v(r).isSeller?(k(),se(m,{key:2,to:"/stores",class:"storePic"},{default:z(()=>[Re]),_:1})):W("",!0),te(m,{to:"/user/login",class:"user-login-wrapper",onClick:o[0]||(o[0]=P=>v(r).logout())},{default:z(()=>[te(Ae,{msg:v(r).buttonText,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},it=R(Xe,[["__scopeId","data-v-39235f8e"]]);var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ke(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var he={exports:{}};(function(e,r){(function(c,o){e.exports=o()})(Qe,function(){var c=1e3,o=6e4,m=36e5,P="millisecond",E="second",I="minute",A="hour",D="day",J="week",S="month",ae="quarter",T="year",B="date",ie="Invalid Date",pe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ge=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Q=function(a,n,t){var i=String(a);return!i||i.length>=n?a:""+Array(n+1-i.length).join(t)+a},me={s:Q,z:function(a){var n=-a.utcOffset(),t=Math.abs(n),i=Math.floor(t/60),s=t%60;return(n<=0?"+":"-")+Q(i,2,"0")+":"+Q(s,2,"0")},m:function a(n,t){if(n.date()<t.date())return-a(t,n);var i=12*(t.year()-n.year())+(t.month()-n.month()),s=n.clone().add(i,S),l=t-s<0,u=n.clone().add(i+(l?-1:1),S);return+(-(i+(t-s)/(l?s-u:u-s))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:S,y:T,w:J,d:D,D:B,h:A,m:I,s:E,ms:P,Q:ae}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},U="en",H={};H[U]=_e;var K=function(a){return a instanceof q},Z=function(a,n,t){var i;if(!a)return U;if(typeof a=="string")H[a]&&(i=a),n&&(H[a]=n,i=a);else{var s=a.name;H[s]=a,i=s}return!t&&i&&(U=i),i||!t&&U},g=function(a,n){if(K(a))return a.clone();var t=typeof n=="object"?n:{};return t.date=a,t.args=arguments,new q(t)},d=me;d.l=Z,d.i=K,d.w=function(a,n){return g(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var q=function(){function a(t){this.$L=Z(t.locale,null,!0),this.parse(t)}var n=a.prototype;return n.parse=function(t){this.$d=function(i){var s=i.date,l=i.utc;if(s===null)return new Date(NaN);if(d.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(pe);if(u){var f=u[2]-1||0,p=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)):new Date(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)}}return new Date(s)}(t),this.$x=t.x||{},this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return d},n.isValid=function(){return this.$d.toString()!==ie},n.isSame=function(t,i){var s=g(t);return this.startOf(i)<=s&&s<=this.endOf(i)},n.isAfter=function(t,i){return g(t)<this.startOf(i)},n.isBefore=function(t,i){return this.endOf(i)<g(t)},n.$g=function(t,i,s){return d.u(t)?this[i]:this.set(s,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,i){var s=this,l=!!d.u(i)||i,u=d.p(t),f=function(L,w){var O=d.w(s.$u?Date.UTC(s.$y,w,L):new Date(s.$y,w,L),s);return l?O:O.endOf(D)},p=function(L,w){return d.w(s.toDate()[L].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(w)),s)},h=this.$W,y=this.$M,C=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case T:return l?f(1,0):f(31,11);case S:return l?f(1,y):f(0,y+1);case J:var Y=this.$locale().weekStart||0,j=(h<Y?h+7:h)-Y;return f(l?C-j:C+(6-j),y);case D:case B:return p(b+"Hours",0);case A:return p(b+"Minutes",1);case I:return p(b+"Seconds",2);case E:return p(b+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,i){var s,l=d.p(t),u="set"+(this.$u?"UTC":""),f=(s={},s[D]=u+"Date",s[B]=u+"Date",s[S]=u+"Month",s[T]=u+"FullYear",s[A]=u+"Hours",s[I]=u+"Minutes",s[E]=u+"Seconds",s[P]=u+"Milliseconds",s)[l],p=l===D?this.$D+(i-this.$W):i;if(l===S||l===T){var h=this.clone().set(B,1);h.$d[f](p),h.init(),this.$d=h.set(B,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},n.set=function(t,i){return this.clone().$set(t,i)},n.get=function(t){return this[d.p(t)]()},n.add=function(t,i){var s,l=this;t=Number(t);var u=d.p(i),f=function(y){var C=g(l);return d.w(C.date(C.date()+Math.round(y*t)),l)};if(u===S)return this.set(S,this.$M+t);if(u===T)return this.set(T,this.$y+t);if(u===D)return f(1);if(u===J)return f(7);var p=(s={},s[I]=o,s[A]=m,s[E]=c,s)[u]||1,h=this.$d.getTime()+t*p;return d.w(h,this)},n.subtract=function(t,i){return this.add(-1*t,i)},n.format=function(t){var i=this,s=this.$locale();if(!this.isValid())return s.invalidDate||ie;var l=t||"YYYY-MM-DDTHH:mm:ssZ",u=d.z(this),f=this.$H,p=this.$m,h=this.$M,y=s.weekdays,C=s.months,b=function(w,O,ee,G){return w&&(w[O]||w(i,l))||ee[O].substr(0,G)},Y=function(w){return d.s(f%12||12,w,"0")},j=s.meridiem||function(w,O,ee){var G=w<12?"AM":"PM";return ee?G.toLowerCase():G},L={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:d.s(h+1,2,"0"),MMM:b(s.monthsShort,h,C,3),MMMM:b(C,h),D:this.$D,DD:d.s(this.$D,2,"0"),d:String(this.$W),dd:b(s.weekdaysMin,this.$W,y,2),ddd:b(s.weekdaysShort,this.$W,y,3),dddd:y[this.$W],H:String(f),HH:d.s(f,2,"0"),h:Y(1),hh:Y(2),a:j(f,p,!0),A:j(f,p,!1),m:String(p),mm:d.s(p,2,"0"),s:String(this.$s),ss:d.s(this.$s,2,"0"),SSS:d.s(this.$ms,3,"0"),Z:u};return l.replace(ge,function(w,O){return O||L[w]||u.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,i,s){var l,u=d.p(i),f=g(t),p=(f.utcOffset()-this.utcOffset())*o,h=this-f,y=d.m(this,f);return y=(l={},l[T]=y/12,l[S]=y,l[ae]=y/3,l[J]=(h-p)/6048e5,l[D]=(h-p)/864e5,l[A]=h/m,l[I]=h/o,l[E]=h/c,l)[u]||h,s?y:d.a(y)},n.daysInMonth=function(){return this.endOf(S).$D},n.$locale=function(){return H[this.$L]},n.locale=function(t,i){if(!t)return this.$L;var s=this.clone(),l=Z(t,i,!0);return l&&(s.$L=l),s},n.clone=function(){return d.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a}(),ce=q.prototype;return g.prototype=ce,[["$ms",P],["$s",E],["$m",I],["$H",A],["$W",D],["$M",S],["$y",T],["$D",B]].forEach(function(a){ce[a[1]]=function(n){return this.$g(n,a[0],a[1])}}),g.extend=function(a,n){return a.$i||(a(n,q,g),a.$i=!0),g},g.locale=Z,g.isDayjs=K,g.unix=function(a){return g(1e3*a)},g.en=H[U],g.Ls=H,g.p={},g})})(he);var et=he.exports;const tt=Ke(et);const st={class:"year-wrapper"},rt={class:"year"},nt={__name:"FooterComponent",setup(e){const r=Se(tt().year());return(c,o)=>(k(),F("footer",null,[$("div",st,[$("span",rt,"© 2022-"+N(r.value),1)])]))}},ct=R(nt,[["__scopeId","data-v-b8a0bbd6"]]);export{at as A,Ae as B,ct as F,it as H,R as _,be as a,Ee as b,x as c,re as t,le as u};
