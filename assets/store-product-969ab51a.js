import{x as p}from"./index-7215024e.js";import{u as g,b as f,a as m,c as n,t as u}from"./FooterComponent-cc28d71c.js";import{u as S}from"./product-8e196220.js";const c=g(),d=f(),t=m(),i=S(),T=p("store",{state:()=>({products:[],categories:[],seller:{}}),getters:{},actions:{async getSeller(e){const s=await n.GET(`/api/v1/users/${e}`,void 0),{success:r,message:o,data:a}=s.data;return r?(this.seller=a.seller,Number(e)!==d.user.id?d.isSelfUser=!1:d.isSelfUser=!0):c.setError(o)},async getSellerProducts(e){const s=await n.GET(`/api/v1/stores/${e}`,void 0),{success:r,message:o,data:a}=s.data;return r?this.products=a.products:c.setError(o)},async getSelfProducts(){const e=u.putTokenToHeader(),s=await n.GET("/api/v1/stores",void 0,e),{success:r,message:o,data:a}=s.data;return r?(d.isSelfUser=!0,this.products=a.products):c.setError(o)},async getCategories(){const e=await n.GET("/api/v1/products/categories"),{data:s,success:r,message:o}=e.data;if(!r)return c.setError(o),"err";this.categories=s.categories},async postStore(){const e=u.putTokenToHeader(),s=await n.formDataPOST("/api/v1/stores",{name:t.name,price:t.price,inventory:t.inventory,avatar:t.avatar,description:t.description,category:t.category},e),{success:r,message:o}=s.data;if(!r)return c.setError(o),"err";c.setSuccess(o)},async getCategoriesProduct(e){const[s,r]=await Promise.all([this.getCategories(),i.getProduct(e)]);if(s||r)return"err";t.name=i.product.name,t.price=i.product.price,t.inventory=i.product.stock,t.avatar=i.product.avatar,t.description=i.product.description,t.category=i.product.Category.id},async putStore(e){const s=u.putTokenToHeader(),r=await n.formDataPUT(`/api/v1/stores/${e}`,{name:t.name,price:t.price,inventory:t.inventory,avatar:t.avatar,description:t.description,category:t.category},s),{success:o,message:a}=r.data;if(!o)return c.setError(a),"err";c.setSuccess(a)},async deleteStore(e){const s=u.putTokenToHeader(),r=await n.DELETE(`/api/v1/stores/${e}`,void 0,s),{success:o,message:a}=r.data;return o?(this.deleteStoreShop(e),c.setSuccess(a)):c.setError(a)},deleteStoreShop(e){const s=this.products.filter(r=>r.id!==e);this.products=s}}});export{T as u};
