import{A as Q,z as ne,b as B,c as F,t as U,l as pe,j as w,e as M,x as V,F as _e,u as ge,r as re,o as me,a as ye,d as X,g as z,f as $e,s as se,p as ve,h as Me}from"./index-4e7a4945.js";const J=n=>Q.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});async function Se(n,l,u){try{return await J(u).post(n,l)}catch(c){return c.response}}async function we(n,l,u){try{return await J(u).get(n,l)}catch(c){return c.response}}async function De(n,l,u){try{return await J(u).patch(n,l)}catch(c){return c.response}}async function ke(n,l,u){try{return await J(u).delete(n,l)}catch(c){return c.response}}const be=n=>Q.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});async function Ce(n,l,u){try{return await be(u).post(n,l)}catch(c){return c.response}}const oe={POST:Se,GET:we,PATCH:De,DELETE:ke,formDataPOST:Ce},ae=()=>{const n=localStorage.getItem("token");return Q.defaults.headers.common.Authorization=`Bearer ${n}`,n},Oe=async()=>{try{const n=ae();return await oe.POST("/api/v1/users/tokenCheck",void 0,n)}catch(n){return n}},Te={putTokenToHeader:ae,tokenCheck:Oe},ie=ne("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(n){this.errMessage=n},setSuccess(n){this.successMessage=n},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""}}});const Z=(n,l)=>{const u=n.__vccOpts||n;for(const[c,y]of l)u[c]=y;return u},xe={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0},link:{type:String}},setup(n){return(l,u)=>(B(),F("button",{style:pe(n.backgroundColor)},U(n.msg),5))}},Be=Z(xe,[["__scopeId","data-v-05c7974f"]]);const He={key:0,class:"alert-wrapper"},Ae={class:"alert-message success-color"},Ie={class:"text"},Fe={key:1,class:"alert-wrapper"},Le={class:"alert-message error-color"},Ye={class:"text"},Ee={__name:"AlertComponent",setup(n){const l=ie();return(u,c)=>(B(),F(_e,null,[w(l).successMessage?(B(),F("div",He,[M("div",Ae,[M("div",Ie,U(w(l).successMessage),1),M("button",{type:"button",class:"close-button success-color",onClick:c[0]||(c[0]=(...y)=>w(l).clearSuccessMessages&&w(l).clearSuccessMessages(...y))},"X")])])):V("",!0),w(l).errMessage?(B(),F("div",Fe,[M("div",Le,[M("div",Ye,U(w(l).errMessage),1),M("button",{type:"button",class:"close-button error-color",onClick:c[1]||(c[1]=(...y)=>w(l).clearErrorMessages&&w(l).clearErrorMessages(...y))},"X")])])):V("",!0)],64))}},Ke=Z(Ee,[["__scopeId","data-v-d628387e"]]),je=ne("login",{state:()=>({loginSwitch:"login",isBuyer:!1,isSeller:!1,buttonOn:!1}),getters:{},actions:{setLoginSwitch(n){this.loginSwitch=n},setisBuyer(n){this.isBuyer=n},setisSeller(n){this.isSeller=n},setButtonOn(n){this.buttonOn=n}}});const ue=n=>(ve("data-v-4ef3c0d2"),n=n(),Me(),n),Pe={class:"title-wrapper"},Ne={class:"func-wrapper"},We=ue(()=>M("i",{class:"fa-solid fa-cart-shopping"},null,-1)),ze=ue(()=>M("i",{class:"fa-solid fa-store"},null,-1)),Ue={__name:"HeaderComponent",setup(n){const l=ge(),u=je(),c=ie(),y=re("");me(async()=>{const D=Te.putTokenToHeader(),v=await oe.GET("/api/v1/users",void 0,D),{success:g,user:k}=v.data;g||(u.setisBuyer(!1),u.setisSeller(!1),u.setButtonOn(!1),y.value="login"),g&&k.role==="buyer"?(u.setisBuyer(!0),u.setisSeller(!1),u.setButtonOn(!0),y.value="logout"):g&&k.role==="seller"&&(u.setisSeller(!0),u.setisBuyer(!1),u.setButtonOn(!1),y.value="logout")});const L=()=>{y.value==="logout"&&(c.setSuccess("登出成功"),localStorage.removeItem("token"),l.push("/user/login"))},C=()=>{l.push("/shopcars")};return(D,v)=>{const g=ye("router-link");return B(),F("header",null,[M("div",Pe,[X(g,{to:"/home",class:"title"},{default:z(()=>[$e("我的電商網站")]),_:1})]),M("div",Ne,[w(u).isBuyer?(B(),se(g,{key:0,to:"/shopcars",class:"shopcarPic",onClick:v[0]||(v[0]=k=>C())},{default:z(()=>[We]),_:1})):V("",!0),w(u).isSeller?(B(),se(g,{key:1,to:"/stores",class:"storePic"},{default:z(()=>[ze]),_:1})):V("",!0),X(g,{to:"/user/login",class:"user-login-wrapper",onClick:v[1]||(v[1]=k=>L())},{default:z(()=>[X(Be,{msg:y.value,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},et=Z(Ue,[["__scopeId","data-v-4ef3c0d2"]]);var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ce={exports:{}};(function(n,l){(function(u,c){n.exports=c()})(Ve,function(){var u=1e3,c=6e4,y=36e5,L="millisecond",C="second",D="minute",v="hour",g="day",k="week",S="month",K="quarter",O="year",A="date",ee="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,de=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,he={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},q=function(r,s,e){var o=String(r);return!o||o.length>=s?r:""+Array(s+1-o.length).join(e)+r},fe={s:q,z:function(r){var s=-r.utcOffset(),e=Math.abs(s),o=Math.floor(e/60),t=e%60;return(s<=0?"+":"-")+q(o,2,"0")+":"+q(t,2,"0")},m:function r(s,e){if(s.date()<e.date())return-r(e,s);var o=12*(e.year()-s.year())+(e.month()-s.month()),t=s.clone().add(o,S),i=e-t<0,a=s.clone().add(o+(i?-1:1),S);return+(-(o+(e-t)/(i?t-a:a-t))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:S,y:O,w:k,d:g,D:A,h:v,m:D,s:C,ms:L,Q:K}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},Y="en",H={};H[Y]=he;var G=function(r){return r instanceof N},P=function(r,s,e){var o;if(!r)return Y;if(typeof r=="string")H[r]&&(o=r),s&&(H[r]=s,o=r);else{var t=r.name;H[t]=r,o=t}return!e&&o&&(Y=o),o||!e&&Y},_=function(r,s){if(G(r))return r.clone();var e=typeof s=="object"?s:{};return e.date=r,e.args=arguments,new N(e)},d=fe;d.l=P,d.i=G,d.w=function(r,s){return _(r,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var N=function(){function r(e){this.$L=P(e.locale,null,!0),this.parse(e)}var s=r.prototype;return s.parse=function(e){this.$d=function(o){var t=o.date,i=o.utc;if(t===null)return new Date(NaN);if(d.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var a=t.match(le);if(a){var h=a[2]-1||0,p=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],h,a[3]||1,a[4]||0,a[5]||0,a[6]||0,p)):new Date(a[1],h,a[3]||1,a[4]||0,a[5]||0,a[6]||0,p)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},s.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},s.$utils=function(){return d},s.isValid=function(){return this.$d.toString()!==ee},s.isSame=function(e,o){var t=_(e);return this.startOf(o)<=t&&t<=this.endOf(o)},s.isAfter=function(e,o){return _(e)<this.startOf(o)},s.isBefore=function(e,o){return this.endOf(o)<_(e)},s.$g=function(e,o,t){return d.u(e)?this[o]:this.set(t,e)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(e,o){var t=this,i=!!d.u(o)||o,a=d.p(e),h=function(I,$){var x=d.w(t.$u?Date.UTC(t.$y,$,I):new Date(t.$y,$,I),t);return i?x:x.endOf(g)},p=function(I,$){return d.w(t.toDate()[I].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice($)),t)},f=this.$W,m=this.$M,T=this.$D,b="set"+(this.$u?"UTC":"");switch(a){case O:return i?h(1,0):h(31,11);case S:return i?h(1,m):h(0,m+1);case k:var E=this.$locale().weekStart||0,j=(f<E?f+7:f)-E;return h(i?T-j:T+(6-j),m);case g:case A:return p(b+"Hours",0);case v:return p(b+"Minutes",1);case D:return p(b+"Seconds",2);case C:return p(b+"Milliseconds",3);default:return this.clone()}},s.endOf=function(e){return this.startOf(e,!1)},s.$set=function(e,o){var t,i=d.p(e),a="set"+(this.$u?"UTC":""),h=(t={},t[g]=a+"Date",t[A]=a+"Date",t[S]=a+"Month",t[O]=a+"FullYear",t[v]=a+"Hours",t[D]=a+"Minutes",t[C]=a+"Seconds",t[L]=a+"Milliseconds",t)[i],p=i===g?this.$D+(o-this.$W):o;if(i===S||i===O){var f=this.clone().set(A,1);f.$d[h](p),f.init(),this.$d=f.set(A,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},s.set=function(e,o){return this.clone().$set(e,o)},s.get=function(e){return this[d.p(e)]()},s.add=function(e,o){var t,i=this;e=Number(e);var a=d.p(o),h=function(m){var T=_(i);return d.w(T.date(T.date()+Math.round(m*e)),i)};if(a===S)return this.set(S,this.$M+e);if(a===O)return this.set(O,this.$y+e);if(a===g)return h(1);if(a===k)return h(7);var p=(t={},t[D]=c,t[v]=y,t[C]=u,t)[a]||1,f=this.$d.getTime()+e*p;return d.w(f,this)},s.subtract=function(e,o){return this.add(-1*e,o)},s.format=function(e){var o=this,t=this.$locale();if(!this.isValid())return t.invalidDate||ee;var i=e||"YYYY-MM-DDTHH:mm:ssZ",a=d.z(this),h=this.$H,p=this.$m,f=this.$M,m=t.weekdays,T=t.months,b=function($,x,R,W){return $&&($[x]||$(o,i))||R[x].substr(0,W)},E=function($){return d.s(h%12||12,$,"0")},j=t.meridiem||function($,x,R){var W=$<12?"AM":"PM";return R?W.toLowerCase():W},I={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:d.s(f+1,2,"0"),MMM:b(t.monthsShort,f,T,3),MMMM:b(T,f),D:this.$D,DD:d.s(this.$D,2,"0"),d:String(this.$W),dd:b(t.weekdaysMin,this.$W,m,2),ddd:b(t.weekdaysShort,this.$W,m,3),dddd:m[this.$W],H:String(h),HH:d.s(h,2,"0"),h:E(1),hh:E(2),a:j(h,p,!0),A:j(h,p,!1),m:String(p),mm:d.s(p,2,"0"),s:String(this.$s),ss:d.s(this.$s,2,"0"),SSS:d.s(this.$ms,3,"0"),Z:a};return i.replace(de,function($,x){return x||I[$]||a.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(e,o,t){var i,a=d.p(o),h=_(e),p=(h.utcOffset()-this.utcOffset())*c,f=this-h,m=d.m(this,h);return m=(i={},i[O]=m/12,i[S]=m,i[K]=m/3,i[k]=(f-p)/6048e5,i[g]=(f-p)/864e5,i[v]=f/y,i[D]=f/c,i[C]=f/u,i)[a]||f,t?m:d.a(m)},s.daysInMonth=function(){return this.endOf(S).$D},s.$locale=function(){return H[this.$L]},s.locale=function(e,o){if(!e)return this.$L;var t=this.clone(),i=P(e,o,!0);return i&&(t.$L=i),t},s.clone=function(){return d.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},r}(),te=N.prototype;return _.prototype=te,[["$ms",L],["$s",C],["$m",D],["$H",v],["$W",g],["$M",S],["$y",O],["$D",A]].forEach(function(r){te[r[1]]=function(s){return this.$g(s,r[0],r[1])}}),_.extend=function(r,s){return r.$i||(r(s,N,_),r.$i=!0),_},_.locale=P,_.isDayjs=G,_.unix=function(r){return _(1e3*r)},_.en=H[Y],_.Ls=H,_.p={},_})})(ce);var Ze=ce.exports;const qe=Je(Ze);const Ge={class:"year-wrapper"},Re={class:"year"},Xe={__name:"FooterComponent",setup(n){const l=re(qe().year());return(u,c)=>(B(),F("footer",null,[M("div",Ge,[M("span",Re,"© 2022-"+U(l.value),1)])]))}},tt=Z(Xe,[["__scopeId","data-v-b993e356"]]);export{Ke as A,Be as B,tt as F,et as H,Z as _,oe as a,je as b,Te as t,ie as u};
