import{u as q,r as B,o as g,b as d,c as u,d as o,e,w as I,n as M,F as h,x as R,j as A,t as b,p as D,h as E}from"./index-efca3eca.js";import{_ as H,u as T,a as L,b as x,H as N,A as V,B as P,F as j,t as z}from"./FooterComponent-690e1eea.js";import{u as G}from"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-27015c05.js";import{p as O}from"./product-edc8630e.js";import{F as c}from"./FormComponent-5e5ca8d9.js";const n=l=>(D("data-v-3255779b"),l=l(),E(),l),J={class:"wrapper"},K={class:"form-wrapper"},Q={class:"form-title"},U=n(()=>e("h3",null,"上架商品",-1)),W=["onSubmit"],X={class:"form-item"},Y=n(()=>e("label",{for:"category",class:"form-label"},"商品分類",-1)),Z=n(()=>e("span",{class:"form-text"},"※注意商品分類為必填",-1)),$=n(()=>e("option",{class:"form-input",value:"",disabled:"",selected:""},"商品分類",-1)),ee=["value"],te=n(()=>e("div",{class:"invalid-text"},"此項目為必選，請選擇商品分類",-1)),se=n(()=>e("div",{class:"valid-text"},b("✓"),-1)),oe={__name:"AddStore",setup(l){const m=q(),i=T(),a=G(),y=L(),_=O();i.clearErrorMessages(),i.clearSuccessMessages();const v=B(""),S=()=>{v.value="was-validated"};g(()=>{if(y.user.role!=="seller")return m.push("/")}),g(async()=>{const t=await x.GET("/api/v1/products/categories"),{data:r,success:s,message:p}=t.data;return s?_.categories=r.categories:i.setError(p)});const C=t=>{const r=t.target.files[0];a.avatar=r},F=async t=>{if(!t.target.checkValidity())return t.preventDefault();const s=z.putTokenToHeader(),p=await x.formDataPOST("/api/v1/stores",{name:a.name,price:a.price,inventory:a.inventory,avatar:a.avatar,description:a.description,category:a.category},s),{success:w,message:f}=p.data;if(!w)return i.setError(f);i.setSuccess(f),m.push("/stores")},k=t=>{const r=t.target.value,s=t.target.id;a.setChangeInput(s,r)};return(t,r)=>(d(),u(h,null,[o(N),e("div",J,[e("div",K,[e("div",Q,[U,o(V)]),e("form",{onSubmit:I(F,["prevent"]),class:M(v.value),novalidate:""},[o(c,{"label-for":"name","label-text":"商品名稱","span-text":"※填寫1-100字商品名稱","input-placeholder":"請輸入商品名稱","input-type":"text","min-length":"1","max-length":"100",inputRequired:"true","invalid-text":"此項目為必填，字數限制1-100"}),o(c,{"label-for":"price","label-text":"售價","span-text":"※注意售價為必填","input-placeholder":"請輸入售價","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填"}),e("div",X,[Y,Z,e("select",{class:"form-input",onInput:k,name:"category",id:"category",required:""},[$,(d(!0),u(h,null,R(A(_).categories,s=>(d(),u("option",{class:"form-input",value:s.id,key:s.id},b(s.name),9,ee))),128))],32),te,se]),o(c,{"label-for":"inventory","label-text":"存貨量","span-text":"※注意存貨量為必填","input-placeholder":"請輸入存貨量","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填"}),o(c,{"label-for":"avatar","label-text":"商品圖片","span-text":"※注意商品圖片為必填","input-placeholder":"",onChange:C,"input-type":"file",inputRequired:"true","invalid-text":"此項目為必填"}),o(c,{"label-for":"description","label-text":"商品描述","span-text":"※注意商品描述為必填","input-placeholder":"請輸入商品描述","input-type":"textarea","min-length":"1","max-length":"400",inputRequired:"true","invalid-text":"此項目為必填"}),e("div",null,[o(P,{msg:"上架",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:S})])],42,W)])]),o(j)],64))}},le=H(oe,[["__scopeId","data-v-3255779b"]]);export{le as default};
