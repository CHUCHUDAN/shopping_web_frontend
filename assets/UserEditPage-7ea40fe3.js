import{u as y,r as C,o as f,b as k,c as w,d as t,e as o,w as S,n as E,j as u,F as T,p as B,h as H}from"./index-3580c150.js";import{_ as M,u as R,a as q,t as _,b as g,H as U,A as D,B as I,F as P}from"./FooterComponent-b2d2cabc.js";import{u as V}from"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-425db711.js";import{F as l}from"./FormComponent-7554bdee.js";const A=i=>(B("data-v-a7abc2e0"),i=i(),H(),i),L={class:"wrapper"},N={class:"form-wrapper"},j={class:"form-title"},z=A(()=>o("h3",null,"編輯使用者資料",-1)),G=["onSubmit"],J={__name:"UserEditPage",setup(i){const d=y(),n=R(),e=V(),m=q();n.clearErrorMessages(),n.clearSuccessMessages();const h=C(""),x=()=>{window.scrollTo({top:0,behavior:"smooth"}),h.value="was-validated"};f(()=>{m.user.role!=="seller"&&m.user.role!=="buyer"&&d.push("/")}),f(async()=>{const a=_.putTokenToHeader(),r=await g.GET("/api/v1/users",void 0,a),{data:s,success:c,message:p}=r.data;if(!c)return n.setError(p);e.name=s.user.name,e.account=s.user.account,e.email=s.user.email,e.phone=s.user.phone,e.avatar=s.user.avatar});const b=a=>{const r=a.target.files[0];e.avatar=r},F=async a=>{if(!a.target.checkValidity())return a.preventDefault();const s=_.putTokenToHeader(),c=await g.formDataPUT("/api/v1/users",{name:e.name,account:e.account,email:e.email,phone:e.phone,avatar:e.avatar},s),{success:p,message:v}=c.data;if(!p)return n.setError(v);n.setSuccess(v),d.push("/user/profile")};return(a,r)=>(k(),w(T,null,[t(U),o("div",L,[o("div",N,[o("div",j,[z,t(D)]),o("form",{onSubmit:S(F,["prevent"]),class:E(h.value),novalidate:""},[t(l,{"label-for":"name","label-text":"名稱","span-text":"※注意請填寫1-20字名稱","input-placeholder":"請輸入使用者名稱","input-type":"text","min-length":"1","max-length":"20",inputRequired:"true","invalid-text":"此項目為必填，字數限制1-20字",value:u(e).name},null,8,["value"]),t(l,{"label-for":"account","label-text":"帳號","span-text":"※注意請填寫1-50字帳號","input-placeholder":"請輸入使用者帳號","input-type":"text","min-length":"1","max-length":"50",inputRequired:"true","invalid-text":"此項目為必填，字數限制1-50字",value:u(e).account},null,8,["value"]),t(l,{"label-for":"email","label-text":"信箱","span-text":"※注意信箱非必填，請輸入3-50字信箱","input-placeholder":"請輸入有效信箱","input-type":"email","min-length":"3","max-length":"50",inputRequired:"false","invalid-text":"此項目非必填，請輸入正確信箱格式",value:u(e).email},null,8,["value"]),t(l,{"label-for":"phone","label-text":"手機","span-text":"※注意手機為非必填，請輸入10碼手機號碼","input-placeholder":"請輸入手機號碼","input-type":"text","min-length":"10","max-length":"10",inputRequired:"false","invalid-text":"此項目非必填，請輸入正確手機格式",value:u(e).phone},null,8,["value"]),t(l,{"label-for":"avatar","label-text":"使用者大頭貼","span-text":"※注意使用者大頭貼非必填","input-placeholder":"",onChange:b,"input-type":"file",inputRequired:"false","invalid-text":"此項目非必填"}),o("div",null,[t(I,{msg:"更新",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:x})])],42,G)])]),t(P)],64))}},X=M(J,[["__scopeId","data-v-a7abc2e0"]]);export{X as default};
