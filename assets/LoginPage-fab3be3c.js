import{u as v,o as x,r as b,a as w,b as C,c as k,d as e,e as t,w as F,n as S,f as u,g as y,F as B,p as L,h as I}from"./index-10f80346.js";import{_ as M,u as P,a as V,H as D,A as E,B as H,F as N,b as R}from"./FooterComponent-603db2d7.js";import{u as q}from"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-e2d200a0.js";import{F as p}from"./FormComponent-aed8b599.js";const A=o=>(L("data-v-232cf8f1"),o=o(),I(),o),T={class:"wrapper"},z={class:"form-wrapper"},O={class:"form-title"},j=A(()=>t("h3",null,"Login",-1)),G=["onSubmit"],J={class:"login-text"},K={__name:"LoginPage",setup(o){const n=v(),s=P(),c=q(),i=V();s.clearErrorMessages(),x(()=>{(i.user.role==="seller"||i.user.role==="buyer")&&n.push("/")});const l=b(""),d=()=>{l.value="was-validated"},m=async a=>{if(!a.target.checkValidity())return a.preventDefault();const r=await R.POST("/api/v1/users/signin",{account:c.account,password:c.password}),{data:g,success:f,message:h}=r.data;if(!f)return s.setError(h);localStorage.setItem("token",g.token),s.setSuccess("登入成功"),n.push("/")};return(a,_)=>{const r=w("router-link");return C(),k(B,null,[e(D),t("div",T,[t("div",z,[t("div",O,[j,e(E)]),t("form",{onSubmit:F(m,["prevent"]),class:S(l.value),novalidate:""},[e(p,{"label-for":"account","label-text":"帳號","span-text":"※注意請填寫3-50字的帳號","input-placeholder":"請輸入帳號","input-type":"text","min-length":"3","max-length":"50",inputRequired:"true","invalid-text":"此項目為必填，字數限制3-50"}),e(p,{"label-for":"password","label-text":"密碼","span-text":"※注意請填寫4-50長度的密碼","input-placeholder":"請輸入有效密碼","input-type":"password","min-length":"4","max-length":"50",inputRequired:"true","invalid-text":"此項目為必填，字數限制4-50"}),t("div",null,[e(H,{msg:"login",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:d})]),t("div",J,[u(" 還沒有帳號 ? "),e(r,{to:"/user/register",class:"login-text-link"},{default:y(()=>[u("註冊")]),_:1})])],42,G)])]),e(N)],64)}}},Y=M(K,[["__scopeId","data-v-232cf8f1"]]);export{Y as default};
