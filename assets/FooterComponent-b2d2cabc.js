import{z as ee,q as ne,b as O,c as A,t as j,l as oe,j as S,e as y,m as P,F as ge,u as me,r as ae,o as ye,a as $e,d as Q,g as E,y as K,p as ve,h as Me}from"./index-3580c150.js";const W=s=>ee.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});async function Se(s,l,a){try{return await W(a).post(s,l)}catch(u){return u.response}}async function we(s,l,a){try{return await W(a).get(s,l)}catch(u){return u.response}}async function be(s,l,a){try{return await W(a).patch(s,l)}catch(u){return u.response}}async function De(s,l,a){try{return await W(a).delete(s,l)}catch(u){return u.response}}async function ke(s,l,a){try{return await W(a).put(s,l)}catch(u){return u.response}}const ie=s=>ee.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});async function Oe(s,l,a){try{return await ie(a).post(s,l)}catch(u){return u.response}}async function Ce(s,l,a){try{return await ie(a).put(s,l)}catch(u){return u.response}}const ue={POST:Se,GET:we,PATCH:be,DELETE:De,PUT:ke,formDataPOST:Oe,formDataPUT:Ce},ce=ne("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(s){this.errMessage=s},setSuccess(s){this.successMessage=s},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""}}}),Te=ne("login",{state:()=>({loginSwitch:"login",isBuyer:!1,isSeller:!1,isUser:!1,buttonOn:!1,user:{},isSelfUser:""}),getters:{},actions:{setLoginSwitch(s){this.loginSwitch=s},setisBuyer(s){this.isBuyer=s},setisSeller(s){this.isSeller=s},setButtonOn(s){this.buttonOn=s},setIsUser(s){this.isUser=s}}});const J=(s,l)=>{const a=s.__vccOpts||s;for(const[u,$]of l)a[u]=$;return a},xe={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0},link:{type:String}},setup(s){return(l,a)=>(O(),A("button",{style:oe(s.backgroundColor)},j(s.msg),5))}},Be=J(xe,[["__scopeId","data-v-05c7974f"]]);const He={key:0,class:"alert-wrapper"},Ie={class:"alert-message success-color"},Ae={class:"text"},Ue={key:1,class:"alert-wrapper"},Fe={class:"alert-message error-color"},Le={class:"text"},Ye={__name:"AlertComponent",setup(s){const l=ce();return(a,u)=>(O(),A(ge,null,[S(l).successMessage?(O(),A("div",He,[y("div",Ie,[y("div",Ae,j(S(l).successMessage),1),y("button",{type:"button",class:"close-button success-color",onClick:u[0]||(u[0]=(...$)=>S(l).clearSuccessMessages&&S(l).clearSuccessMessages(...$))},"X")])])):P("",!0),S(l).errMessage?(O(),A("div",Ue,[y("div",Fe,[y("div",Le,j(S(l).errMessage),1),y("button",{type:"button",class:"close-button error-color",onClick:u[1]||(u[1]=(...$)=>S(l).clearErrorMessages&&S(l).clearErrorMessages(...$))},"X")])])):P("",!0)],64))}},nt=J(Ye,[["__scopeId","data-v-573cb71b"]]),Ee="/shopping_web_frontend/assets/shark_logo-af2be115.png",le=()=>{const s=localStorage.getItem("token");return ee.defaults.headers.common.Authorization=`Bearer ${s}`,s},Pe=async()=>{try{const s=le();return await ue.POST("/api/v1/users/tokenCheck",void 0,s)}catch(s){return s}},je={putTokenToHeader:le,tokenCheck:Pe};const Z=s=>(ve("data-v-7b267725"),s=s(),Me(),s),We={class:"title-wrapper"},ze=Z(()=>y("img",{class:"logo-img",src:Ee,alt:"圖片未正確顯示"},null,-1)),Ne=Z(()=>y("div",{class:"logo-text"},"丹尼購物",-1)),Ve={class:"func-wrapper"},qe={class:"user-account"},Je=Z(()=>y("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Ze=Z(()=>y("i",{class:"fa-solid fa-store"},null,-1)),Ge={__name:"HeaderComponent",setup(s){const l=me(),a=Te(),u=ce(),$=ae("");ye(async()=>{const D=je.putTokenToHeader(),w=await ue.GET("/api/v1/users",void 0,D),{success:g,data:v}=w.data;g||(a.setisBuyer(!1),a.setisSeller(!1),a.setButtonOn(!1),a.setIsUser(!1),a.user="",$.value="login"),g&&v.user.role==="buyer"?(a.setisBuyer(!0),a.setisSeller(!1),a.setButtonOn(!0),a.setIsUser(!0),a.user=v.user,$.value="logout"):g&&v.user.role==="seller"&&(a.setisSeller(!0),a.setisBuyer(!1),a.setButtonOn(!1),a.setIsUser(!0),a.user=v.user,$.value="logout")});const U=()=>{$.value==="logout"&&(u.setSuccess("登出成功"),localStorage.removeItem("token"),l.push("/user/login"))};return(D,w)=>{const g=$e("router-link");return O(),A("header",null,[y("div",We,[Q(g,{to:"/home",class:"title"},{default:E(()=>[ze,Ne]),_:1})]),y("div",Ve,[S(a).isUser?(O(),K(g,{key:0,to:"/user/profile",class:"userPic"},{default:E(()=>[y("div",{class:"user-pic",style:oe(`background-image: url('${S(a).user.avatar}')`)},null,4),y("div",qe,j(S(a).user.account),1)]),_:1})):P("",!0),S(a).isBuyer?(O(),K(g,{key:1,to:"/shopcars",class:"shopcarPic"},{default:E(()=>[Je]),_:1})):P("",!0),S(a).isSeller?(O(),K(g,{key:2,to:"/stores",class:"storePic"},{default:E(()=>[Ze]),_:1})):P("",!0),Q(g,{to:"/user/login",class:"user-login-wrapper",onClick:w[0]||(w[0]=v=>U())},{default:E(()=>[Q(Be,{msg:$.value,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},ot=J(Ge,[["__scopeId","data-v-7b267725"]]);var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var de={exports:{}};(function(s,l){(function(a,u){s.exports=u()})(Re,function(){var a=1e3,u=6e4,$=36e5,U="millisecond",D="second",w="minute",g="hour",v="day",z="week",b="month",te="quarter",C="year",H="date",se="Invalid Date",he=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,fe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},G=function(n,r,e){var o=String(n);return!o||o.length>=r?n:""+Array(r+1-o.length).join(e)+n},_e={s:G,z:function(n){var r=-n.utcOffset(),e=Math.abs(r),o=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+G(o,2,"0")+":"+G(t,2,"0")},m:function n(r,e){if(r.date()<e.date())return-n(e,r);var o=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(o,b),c=e-t<0,i=r.clone().add(o+(c?-1:1),b);return+(-(o+(e-t)/(c?t-i:i-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:b,y:C,w:z,d:v,D:H,h:g,m:w,s:D,ms:U,Q:te}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},F="en",B={};B[F]=pe;var R=function(n){return n instanceof V},N=function(n,r,e){var o;if(!n)return F;if(typeof n=="string")B[n]&&(o=n),r&&(B[n]=r,o=n);else{var t=n.name;B[t]=n,o=t}return!e&&o&&(F=o),o||!e&&F},_=function(n,r){if(R(n))return n.clone();var e=typeof r=="object"?r:{};return e.date=n,e.args=arguments,new V(e)},d=_e;d.l=N,d.i=R,d.w=function(n,r){return _(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var V=function(){function n(e){this.$L=N(e.locale,null,!0),this.parse(e)}var r=n.prototype;return r.parse=function(e){this.$d=function(o){var t=o.date,c=o.utc;if(t===null)return new Date(NaN);if(d.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(he);if(i){var h=i[2]-1||0,p=(i[7]||"0").substring(0,3);return c?new Date(Date.UTC(i[1],h,i[3]||1,i[4]||0,i[5]||0,i[6]||0,p)):new Date(i[1],h,i[3]||1,i[4]||0,i[5]||0,i[6]||0,p)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return d},r.isValid=function(){return this.$d.toString()!==se},r.isSame=function(e,o){var t=_(e);return this.startOf(o)<=t&&t<=this.endOf(o)},r.isAfter=function(e,o){return _(e)<this.startOf(o)},r.isBefore=function(e,o){return this.endOf(o)<_(e)},r.$g=function(e,o,t){return d.u(e)?this[o]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,o){var t=this,c=!!d.u(o)||o,i=d.p(e),h=function(I,M){var x=d.w(t.$u?Date.UTC(t.$y,M,I):new Date(t.$y,M,I),t);return c?x:x.endOf(v)},p=function(I,M){return d.w(t.toDate()[I].apply(t.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(M)),t)},f=this.$W,m=this.$M,T=this.$D,k="set"+(this.$u?"UTC":"");switch(i){case C:return c?h(1,0):h(31,11);case b:return c?h(1,m):h(0,m+1);case z:var L=this.$locale().weekStart||0,Y=(f<L?f+7:f)-L;return h(c?T-Y:T+(6-Y),m);case v:case H:return p(k+"Hours",0);case g:return p(k+"Minutes",1);case w:return p(k+"Seconds",2);case D:return p(k+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,o){var t,c=d.p(e),i="set"+(this.$u?"UTC":""),h=(t={},t[v]=i+"Date",t[H]=i+"Date",t[b]=i+"Month",t[C]=i+"FullYear",t[g]=i+"Hours",t[w]=i+"Minutes",t[D]=i+"Seconds",t[U]=i+"Milliseconds",t)[c],p=c===v?this.$D+(o-this.$W):o;if(c===b||c===C){var f=this.clone().set(H,1);f.$d[h](p),f.init(),this.$d=f.set(H,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},r.set=function(e,o){return this.clone().$set(e,o)},r.get=function(e){return this[d.p(e)]()},r.add=function(e,o){var t,c=this;e=Number(e);var i=d.p(o),h=function(m){var T=_(c);return d.w(T.date(T.date()+Math.round(m*e)),c)};if(i===b)return this.set(b,this.$M+e);if(i===C)return this.set(C,this.$y+e);if(i===v)return h(1);if(i===z)return h(7);var p=(t={},t[w]=u,t[g]=$,t[D]=a,t)[i]||1,f=this.$d.getTime()+e*p;return d.w(f,this)},r.subtract=function(e,o){return this.add(-1*e,o)},r.format=function(e){var o=this,t=this.$locale();if(!this.isValid())return t.invalidDate||se;var c=e||"YYYY-MM-DDTHH:mm:ssZ",i=d.z(this),h=this.$H,p=this.$m,f=this.$M,m=t.weekdays,T=t.months,k=function(M,x,X,q){return M&&(M[x]||M(o,c))||X[x].substr(0,q)},L=function(M){return d.s(h%12||12,M,"0")},Y=t.meridiem||function(M,x,X){var q=M<12?"AM":"PM";return X?q.toLowerCase():q},I={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:d.s(f+1,2,"0"),MMM:k(t.monthsShort,f,T,3),MMMM:k(T,f),D:this.$D,DD:d.s(this.$D,2,"0"),d:String(this.$W),dd:k(t.weekdaysMin,this.$W,m,2),ddd:k(t.weekdaysShort,this.$W,m,3),dddd:m[this.$W],H:String(h),HH:d.s(h,2,"0"),h:L(1),hh:L(2),a:Y(h,p,!0),A:Y(h,p,!1),m:String(p),mm:d.s(p,2,"0"),s:String(this.$s),ss:d.s(this.$s,2,"0"),SSS:d.s(this.$ms,3,"0"),Z:i};return c.replace(fe,function(M,x){return x||I[M]||i.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,o,t){var c,i=d.p(o),h=_(e),p=(h.utcOffset()-this.utcOffset())*u,f=this-h,m=d.m(this,h);return m=(c={},c[C]=m/12,c[b]=m,c[te]=m/3,c[z]=(f-p)/6048e5,c[v]=(f-p)/864e5,c[g]=f/$,c[w]=f/u,c[D]=f/a,c)[i]||f,t?m:d.a(m)},r.daysInMonth=function(){return this.endOf(b).$D},r.$locale=function(){return B[this.$L]},r.locale=function(e,o){if(!e)return this.$L;var t=this.clone(),c=N(e,o,!0);return c&&(t.$L=c),t},r.clone=function(){return d.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n}(),re=V.prototype;return _.prototype=re,[["$ms",U],["$s",D],["$m",w],["$H",g],["$W",v],["$M",b],["$y",C],["$D",H]].forEach(function(n){re[n[1]]=function(r){return this.$g(r,n[0],n[1])}}),_.extend=function(n,r){return n.$i||(n(r,V,_),n.$i=!0),_},_.locale=N,_.isDayjs=R,_.unix=function(n){return _(1e3*n)},_.en=B[F],_.Ls=B,_.p={},_})})(de);var Qe=de.exports;const Ke=Xe(Qe);const et={class:"year-wrapper"},tt={class:"year"},st={__name:"FooterComponent",setup(s){const l=ae(Ke().year());return(a,u)=>(O(),A("footer",null,[y("div",et,[y("span",tt,"© 2022-"+j(l.value),1)])]))}},at=J(st,[["__scopeId","data-v-b993e356"]]);export{nt as A,Be as B,at as F,ot as H,J as _,Te as a,ue as b,je as t,ce as u};
