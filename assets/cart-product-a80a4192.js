import{x as u}from"./index-7215024e.js";import{u as i,t as c,c as n}from"./FooterComponent-cc28d71c.js";const a=i(),f=u("cart",{state:()=>({products:[],product:{},categories:{},totalAmount:0}),getters:{},actions:{async getCart(){const t=c.putTokenToHeader(),o=await n.GET("/api/v1/carts",void 0,t),{success:s,message:r,data:e}=o.data;return s?(this.totalAmount=e.totalAmount,this.products=e.productsOfCart):a.setError(r)},async postCart(t){window.scrollTo({top:0,behavior:"smooth"});const o=c.putTokenToHeader(),s=await n.POST(`/api/v1/carts/${t}`,void 0,o),{success:r,message:e}=s.data;return r?a.setSuccess(e):a.setError(e)},async deleteCart(t){window.scrollTo({top:0,behavior:"smooth"});const o=c.putTokenToHeader(),s=await n.DELETE(`/api/v1/carts/${t}`,void 0,o),{success:r,message:e}=s.data;return r?(this.deleteCartProduct(t),this.totalAmountCount(),a.setSuccess(e)):a.setError(e)},async updatedCarts(){const t=this.toProductObj(),o=c.putTokenToHeader(),s=await n.PATCH("/api/v1/carts",t,o),{success:r,message:e}=s.data;return r?a.setSuccess(e):a.setError(e)},async checkoutCarts(){const t=this.toProductObj(),o=c.putTokenToHeader(),s=await n.POST("/api/v1/carts/checkout",t,o),{success:r,message:e}=s.data;return r?(this.products=[],this.totalAmount=0,a.setSuccess(e)):a.setError(e)},toProductObj(){const t=this.products;return Object.fromEntries(t.map(s=>[s.Product.id,s.quantity]))},setProductQuantity(t,o){const s=this.products.find(e=>e.Product.id===o),r=s.Product.stock;t==="plus"&&s.quantity<r&&(s.quantity+=1),t==="minus"&&s.quantity>1&&(s.quantity-=1),this.totalAmountCount()},totalAmountCount(){let t=0;this.products.forEach(o=>{t+=o.quantity*o.Product.price}),this.totalAmount=t},deleteCartProduct(t){const o=this.products.filter(s=>s.Product.id!==t);this.products=o}}});export{f as u};
