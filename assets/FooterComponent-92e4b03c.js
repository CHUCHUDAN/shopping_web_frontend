import{z as ee,q as ne,b as k,c as A,t as j,l as oe,j as v,e as y,m as P,F as ge,r as ae,o as me,a as ye,d as Q,g as E,y as K,p as $e,h as ve}from"./index-47b3b9bd.js";const W=s=>ee.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});async function Me(s,n,d){try{return await W(d).post(s,n)}catch(i){return i.response}}async function Se(s,n,d){try{return await W(d).get(s,n)}catch(i){return i.response}}async function we(s,n,d){try{return await W(d).patch(s,n)}catch(i){return i.response}}async function be(s,n,d){try{return await W(d).delete(s,n)}catch(i){return i.response}}async function De(s,n,d){try{return await W(d).put(s,n)}catch(i){return i.response}}const ie=s=>ee.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});async function ke(s,n,d){try{return await ie(d).post(s,n)}catch(i){return i.response}}async function Oe(s,n,d){try{return await ie(d).put(s,n)}catch(i){return i.response}}const ue={POST:Me,GET:Se,PATCH:we,DELETE:be,PUT:De,formDataPOST:ke,formDataPUT:Oe},ce=ne("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(s){this.errMessage=s},setSuccess(s){this.successMessage=s},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""}}}),Ce=ne("login",{state:()=>({loginSwitch:"login",isBuyer:!1,isSeller:!1,isUser:!1,buttonOn:!1,user:{},isSelfUser:""}),getters:{},actions:{setLoginSwitch(s){this.loginSwitch=s},setisBuyer(s){this.isBuyer=s},setisSeller(s){this.isSeller=s},setButtonOn(s){this.buttonOn=s},setIsUser(s){this.isUser=s}}});const J=(s,n)=>{const d=s.__vccOpts||s;for(const[i,b]of n)d[i]=b;return d},Te={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0},link:{type:String}},setup(s){return(n,d)=>(k(),A("button",{style:oe(s.backgroundColor)},j(s.msg),5))}},Be=J(Te,[["__scopeId","data-v-05c7974f"]]);const xe={key:0,class:"alert-wrapper"},He={class:"alert-message success-color"},Ie={class:"text"},Ue={key:1,class:"alert-wrapper"},Ae={class:"alert-message error-color"},Fe={class:"text"},Le={__name:"AlertComponent",setup(s){const n=ce();return(d,i)=>(k(),A(ge,null,[v(n).successMessage?(k(),A("div",xe,[y("div",He,[y("div",Ie,j(v(n).successMessage),1),y("button",{type:"button",class:"close-button success-color",onClick:i[0]||(i[0]=(...b)=>v(n).clearSuccessMessages&&v(n).clearSuccessMessages(...b))},"X")])])):P("",!0),v(n).errMessage?(k(),A("div",Ue,[y("div",Ae,[y("div",Fe,j(v(n).errMessage),1),y("button",{type:"button",class:"close-button error-color",onClick:i[1]||(i[1]=(...b)=>v(n).clearErrorMessages&&v(n).clearErrorMessages(...b))},"X")])])):P("",!0)],64))}},rt=J(Le,[["__scopeId","data-v-573cb71b"]]),Ye="/shopping_web_frontend/assets/shark_logo-af2be115.png",le=()=>{const s=localStorage.getItem("token");return ee.defaults.headers.common.Authorization=`Bearer ${s}`,s},Ee=async()=>{try{const s=le();return await ue.POST("/api/v1/users/tokenCheck",void 0,s)}catch(s){return s}},Pe={putTokenToHeader:le,tokenCheck:Ee};const Z=s=>($e("data-v-4e21db4a"),s=s(),ve(),s),je={class:"title-wrapper"},We=Z(()=>y("img",{class:"logo-img",src:Ye,alt:"圖片未正確顯示"},null,-1)),ze=Z(()=>y("div",{class:"logo-text"},"丹尼購物",-1)),Ne={class:"func-wrapper"},Ve={class:"user-account"},qe=Z(()=>y("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Je=Z(()=>y("i",{class:"fa-solid fa-store"},null,-1)),Ze={__name:"HeaderComponent",setup(s){const n=Ce(),d=ce(),i=ae("");me(async()=>{const H=Pe.putTokenToHeader(),S=await ue.GET("/api/v1/users",void 0,H),{success:g,data:M}=S.data;g||(n.setisBuyer(!1),n.setisSeller(!1),n.setButtonOn(!1),n.setIsUser(!1),n.user="",i.value="login"),g&&M.user.role==="buyer"?(n.setisBuyer(!0),n.setisSeller(!1),n.setButtonOn(!0),n.setIsUser(!0),n.user=M.user,i.value="logout"):g&&M.user.role==="seller"&&(n.setisSeller(!0),n.setisBuyer(!1),n.setButtonOn(!1),n.setIsUser(!0),n.user=M.user,i.value="logout")});const b=()=>{i.value==="logout"&&(d.setSuccess("登出成功"),localStorage.removeItem("token"),n.setisBuyer(!1),n.setisSeller(!1),n.setButtonOn(!1),n.setIsUser(!1),n.user="",i.value="login")};return(H,S)=>{const g=ye("router-link");return k(),A("header",null,[y("div",je,[Q(g,{to:"/",class:"title"},{default:E(()=>[We,ze]),_:1})]),y("div",Ne,[v(n).isUser?(k(),K(g,{key:0,to:"/user/profile",class:"userPic"},{default:E(()=>[y("div",{class:"user-pic",style:oe(`background-image: url('${v(n).user.avatar}')`)},null,4),y("div",Ve,j(v(n).user.account),1)]),_:1})):P("",!0),v(n).isBuyer?(k(),K(g,{key:1,to:"/shopcars",class:"shopcarPic"},{default:E(()=>[qe]),_:1})):P("",!0),v(n).isSeller?(k(),K(g,{key:2,to:"/stores",class:"storePic"},{default:E(()=>[Je]),_:1})):P("",!0),Q(g,{to:"/user/login",class:"user-login-wrapper",onClick:S[0]||(S[0]=M=>b())},{default:E(()=>[Q(Be,{msg:i.value,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},nt=J(Ze,[["__scopeId","data-v-4e21db4a"]]);var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var de={exports:{}};(function(s,n){(function(d,i){s.exports=i()})(Ge,function(){var d=1e3,i=6e4,b=36e5,H="millisecond",S="second",g="minute",M="hour",O="day",z="week",w="month",te="quarter",C="year",I="date",se="Invalid Date",fe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,he=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},G=function(o,r,e){var a=String(o);return!a||a.length>=r?o:""+Array(r+1-a.length).join(e)+o},_e={s:G,z:function(o){var r=-o.utcOffset(),e=Math.abs(r),a=Math.floor(e/60),t=e%60;return(r<=0?"+":"-")+G(a,2,"0")+":"+G(t,2,"0")},m:function o(r,e){if(r.date()<e.date())return-o(e,r);var a=12*(e.year()-r.year())+(e.month()-r.month()),t=r.clone().add(a,w),c=e-t<0,u=r.clone().add(a+(c?-1:1),w);return+(-(a+(e-t)/(c?t-u:u-t))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:w,y:C,w:z,d:O,D:I,h:M,m:g,s:S,ms:H,Q:te}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},F="en",x={};x[F]=pe;var R=function(o){return o instanceof V},N=function(o,r,e){var a;if(!o)return F;if(typeof o=="string")x[o]&&(a=o),r&&(x[o]=r,a=o);else{var t=o.name;x[t]=o,a=t}return!e&&a&&(F=a),a||!e&&F},_=function(o,r){if(R(o))return o.clone();var e=typeof r=="object"?r:{};return e.date=o,e.args=arguments,new V(e)},l=_e;l.l=N,l.i=R,l.w=function(o,r){return _(o,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var V=function(){function o(e){this.$L=N(e.locale,null,!0),this.parse(e)}var r=o.prototype;return r.parse=function(e){this.$d=function(a){var t=a.date,c=a.utc;if(t===null)return new Date(NaN);if(l.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var u=t.match(fe);if(u){var f=u[2]-1||0,p=(u[7]||"0").substring(0,3);return c?new Date(Date.UTC(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)):new Date(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return l},r.isValid=function(){return this.$d.toString()!==se},r.isSame=function(e,a){var t=_(e);return this.startOf(a)<=t&&t<=this.endOf(a)},r.isAfter=function(e,a){return _(e)<this.startOf(a)},r.isBefore=function(e,a){return this.endOf(a)<_(e)},r.$g=function(e,a,t){return l.u(e)?this[a]:this.set(t,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,a){var t=this,c=!!l.u(a)||a,u=l.p(e),f=function(U,$){var B=l.w(t.$u?Date.UTC(t.$y,$,U):new Date(t.$y,$,U),t);return c?B:B.endOf(O)},p=function(U,$){return l.w(t.toDate()[U].apply(t.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice($)),t)},h=this.$W,m=this.$M,T=this.$D,D="set"+(this.$u?"UTC":"");switch(u){case C:return c?f(1,0):f(31,11);case w:return c?f(1,m):f(0,m+1);case z:var L=this.$locale().weekStart||0,Y=(h<L?h+7:h)-L;return f(c?T-Y:T+(6-Y),m);case O:case I:return p(D+"Hours",0);case M:return p(D+"Minutes",1);case g:return p(D+"Seconds",2);case S:return p(D+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,a){var t,c=l.p(e),u="set"+(this.$u?"UTC":""),f=(t={},t[O]=u+"Date",t[I]=u+"Date",t[w]=u+"Month",t[C]=u+"FullYear",t[M]=u+"Hours",t[g]=u+"Minutes",t[S]=u+"Seconds",t[H]=u+"Milliseconds",t)[c],p=c===O?this.$D+(a-this.$W):a;if(c===w||c===C){var h=this.clone().set(I,1);h.$d[f](p),h.init(),this.$d=h.set(I,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},r.set=function(e,a){return this.clone().$set(e,a)},r.get=function(e){return this[l.p(e)]()},r.add=function(e,a){var t,c=this;e=Number(e);var u=l.p(a),f=function(m){var T=_(c);return l.w(T.date(T.date()+Math.round(m*e)),c)};if(u===w)return this.set(w,this.$M+e);if(u===C)return this.set(C,this.$y+e);if(u===O)return f(1);if(u===z)return f(7);var p=(t={},t[g]=i,t[M]=b,t[S]=d,t)[u]||1,h=this.$d.getTime()+e*p;return l.w(h,this)},r.subtract=function(e,a){return this.add(-1*e,a)},r.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||se;var c=e||"YYYY-MM-DDTHH:mm:ssZ",u=l.z(this),f=this.$H,p=this.$m,h=this.$M,m=t.weekdays,T=t.months,D=function($,B,X,q){return $&&($[B]||$(a,c))||X[B].substr(0,q)},L=function($){return l.s(f%12||12,$,"0")},Y=t.meridiem||function($,B,X){var q=$<12?"AM":"PM";return X?q.toLowerCase():q},U={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:l.s(h+1,2,"0"),MMM:D(t.monthsShort,h,T,3),MMMM:D(T,h),D:this.$D,DD:l.s(this.$D,2,"0"),d:String(this.$W),dd:D(t.weekdaysMin,this.$W,m,2),ddd:D(t.weekdaysShort,this.$W,m,3),dddd:m[this.$W],H:String(f),HH:l.s(f,2,"0"),h:L(1),hh:L(2),a:Y(f,p,!0),A:Y(f,p,!1),m:String(p),mm:l.s(p,2,"0"),s:String(this.$s),ss:l.s(this.$s,2,"0"),SSS:l.s(this.$ms,3,"0"),Z:u};return c.replace(he,function($,B){return B||U[$]||u.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,a,t){var c,u=l.p(a),f=_(e),p=(f.utcOffset()-this.utcOffset())*i,h=this-f,m=l.m(this,f);return m=(c={},c[C]=m/12,c[w]=m,c[te]=m/3,c[z]=(h-p)/6048e5,c[O]=(h-p)/864e5,c[M]=h/b,c[g]=h/i,c[S]=h/d,c)[u]||h,t?m:l.a(m)},r.daysInMonth=function(){return this.endOf(w).$D},r.$locale=function(){return x[this.$L]},r.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),c=N(e,a,!0);return c&&(t.$L=c),t},r.clone=function(){return l.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},o}(),re=V.prototype;return _.prototype=re,[["$ms",H],["$s",S],["$m",g],["$H",M],["$W",O],["$M",w],["$y",C],["$D",I]].forEach(function(o){re[o[1]]=function(r){return this.$g(r,o[0],o[1])}}),_.extend=function(o,r){return o.$i||(o(r,V,_),o.$i=!0),_},_.locale=N,_.isDayjs=R,_.unix=function(o){return _(1e3*o)},_.en=x[F],_.Ls=x,_.p={},_})})(de);var Xe=de.exports;const Qe=Re(Xe);const Ke={class:"year-wrapper"},et={class:"year"},tt={__name:"FooterComponent",setup(s){const n=ae(Qe().year());return(d,i)=>(k(),A("footer",null,[y("div",Ke,[y("span",et,"© 2022-"+j(n.value),1)])]))}},ot=J(tt,[["__scopeId","data-v-b993e356"]]);export{rt as A,Be as B,ot as F,nt as H,J as _,Ce as a,ue as b,Pe as t,ce as u};
