import{u as h,r as v,o as x,a as k,b as w,c as C,d as e,e as t,w as F,n as b,f as p,g as S,F as y,p as B,h as I}from"./index-876dbdf5.js";import{_ as M,u as H,t as L,H as P,A as V,B as D,F as E,a as N}from"./FooterComponent-97f0eb0b.js";import{u as R}from"./FormComponent.vue_vue_type_style_index_0_scoped_e1c64aa3_lang-02914e0c.js";import{F as u}from"./FormComponent-fd53e720.js";const q=o=>(B("data-v-236c544c"),o=o(),I(),o),A={class:"wrapper"},T={class:"form-wrapper"},z={class:"form-title"},O=q(()=>t("h3",null,"Login",-1)),j=["onSubmit"],G={class:"login-text"},J={__name:"LoginPage",setup(o){const c=h(),a=H(),i=R();a.clearErrorMessages();const l=v(""),d=()=>{l.value="was-validated"},m=async s=>{if(!s.target.checkValidity())return s.preventDefault();const r=await N.POST("/api/v1/users/signin",{account:i.account,password:i.password}),{data:_,success:g,message:f}=r.data;if(!g)return a.setError(f);localStorage.setItem("token",_.token),a.setSuccess("登入成功"),c.push("/")};return x(async()=>{const s=await L.tokenCheck(),{success:n}=s.data;if(n)return c.push("/")}),(s,n)=>{const r=k("router-link");return w(),C(y,null,[e(P),t("div",A,[t("div",T,[t("div",z,[O,e(V)]),t("form",{onSubmit:F(m,["prevent"]),class:b(l.value),novalidate:""},[e(u,{"label-for":"account","label-text":"帳號","span-text":"※注意請填寫3-50字的帳號","input-placeholder":"請輸入帳號","input-type":"text","min-length":"3","max-length":"50",inputRequired:"true","invalid-text":"此項目為必填，字數限制3-50"}),e(u,{"label-for":"password","label-text":"密碼","span-text":"※注意請填寫4-50長度的密碼","input-placeholder":"請輸入有效密碼","input-type":"password","min-length":"4","max-length":"50",inputRequired:"true","invalid-text":"此項目為必填，字數限制4-50"}),t("div",null,[e(D,{msg:"login",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:d})]),t("div",G,[p(" 還沒有帳號 ? "),e(r,{to:"/user/register",class:"login-text-link"},{default:S(()=>[p("註冊")]),_:1})])],42,j)])]),e(E)],64)}}},X=M(J,[["__scopeId","data-v-236c544c"]]);export{X as default};
