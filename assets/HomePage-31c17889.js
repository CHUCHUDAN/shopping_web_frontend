import{u as y,b as f,_ as $,a as Q,B as h,t as S,H as I,A as F,F as H}from"./FooterComponent-5e9215c1.js";import{q as B,b as d,c as m,x as b,e as t,l as D,t as g,j as e,y as T,m as E,F as P,k as K,r as x,n as v,d as l}from"./index-5c8cde34.js";import{p as C}from"./product-dad92d3a.js";import"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-5184f219.js";const L=C(),M=y(),w=B("page",{state:()=>({pages:[],totalPage:0,currentPage:0,prev:0,next:0,keyword:"",min:"",max:"",minQuantity:"",maxQuantity:""}),getters:{},actions:{async getProducts(p){const o=await f.GET("api/v1/products",{params:{keyword:this.keyword,min:this.min,max:this.max,minQuantity:this.minQuantity,maxQuantity:this.maxQuantity,page:p}}),{success:s,message:c,data:i}=o.data;return s?(this.pages=i.pagination.pages,this.totalPage=i.pagination.totalPage,this.currentPage=i.pagination.currentPage,this.prev=i.pagination.prev,this.next=i.pagination.next,L.setProduct(i.products)):M.setError(c)},setChangeInput(p,o){this[p]=o},clearSearch(){this.keyword="",this.min="",this.max="",this.minQuantity="",this.maxQuantity="",this.getProducts(1)}}});const N=["onClick"],A={class:"product-text"},V={class:"product-name"},z={class:"product-text"},O={class:"product-price"},j={class:"price"},q={__name:"ProductComponent",setup(p){const o=Q(),s=C(),c=y(),i=async a=>{window.scrollTo({top:0,behavior:"smooth"});const u=S.putTokenToHeader(),r=await f.POST(`/api/v1/shopcars/${a}`,void 0,u),{success:_,message:k}=r.data;return _?c.setSuccess(k):c.setError(k)},n=a=>{K.push(`/product/${a}`)};return(a,u)=>(d(!0),m(P,null,b(e(s).products,r=>(d(),m("div",{class:"product-wrapper",key:r.id},[t("div",{class:"product-img",style:D(`background-image: url('${r.avatar}')`),onClick:_=>n(r.id)},null,12,N),t("div",A,[t("div",V,g(r.name),1),t("div",z,g(r.description),1)]),t("div",O,[t("div",j," $ "+g(r.price),1),e(o).buttonOn?(d(),T(h,{key:0,msg:"加入購物車",backgroundColor:"background-color:#FF9797",onClick:_=>i(r.id)},null,8,["onClick"])):E("",!0)])]))),128))}},G=$(q,[["__scopeId","data-v-9740356c"]]),J={"aria-label":"Page navigation example"},R={class:"pagination"},U=t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),W=[U],X=["onClick"],Y={class:"page-link",href:"#"},Z=t("a",{class:"page-link",href:"#","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),tt=[Z],et={__name:"PaginationComponent",setup(p){const o=w(),s=x(null),c=x(null),i=a=>{s.value.classList.contains("disabled")||o.getProducts(a)},n=a=>{c.value.classList.contains("disabled")||o.getProducts(a)};return(a,u)=>(d(),m("div",null,[t("nav",J,[t("ul",R,[t("li",{class:v(["page-item",{disabled:e(o).currentPage===1}]),ref_key:"prev",ref:s,onClick:u[0]||(u[0]=r=>i(e(o).currentPage-1))},W,2),(d(!0),m(P,null,b(e(o).pages,r=>(d(),m("li",{class:v(["page-item",{active:e(o).currentPage===r}]),onClick:_=>e(o).getProducts(r),key:r},[t("a",Y,g(r),1)],10,X))),128)),t("li",{class:v(["page-item",{disabled:e(o).currentPage===e(o).totalPage}]),ref_key:"next",ref:c,onClick:u[1]||(u[1]=r=>n(e(o).currentPage+1))},tt,2)])])]))}};const st={class:"home-wrapper"},nt={class:"search-wrapper"},ot={action:"",class:"form-wrapper"},at={class:"form-item"},rt=["value"],it={class:"form-item"},ct=["value"],ut={class:"form-item"},lt=["value"],dt={class:"form-item"},pt=["value"],mt={class:"form-item"},_t=["value"],gt={class:"button-wrapper"},vt={class:"products-wrapper"},ht={__name:"HomePage",setup(p){const o=y(),s=w();o.clearErrorMessages(),s.getProducts(1);const c=i=>{const n=i.target.value,a=i.target.id;s.setChangeInput(a,n)};return(i,n)=>(d(),m(P,null,[l(I),t("div",st,[l(F),t("div",nt,[t("form",ot,[t("div",at,[t("input",{class:"form-input",type:"text",maxlength:"50",id:"keyword",name:"keyword",value:e(s).keyword,onInput:c,onKeyup:n[0]||(n[0]=a=>e(s).getProducts(1)),placeholder:"輸入關鍵字"},null,40,rt)]),t("div",it,[t("input",{class:"form-input",type:"number",maxlength:"50",id:"minQuantity",name:"minQuantity",value:e(s).minQuantity,onInput:c,onKeyup:n[1]||(n[1]=a=>e(s).getProducts(1)),placeholder:"輸入最小存貨量"},null,40,ct)]),t("div",ut,[t("input",{class:"form-input",type:"number",maxlength:"50",id:"maxQuantity",name:"maxQuantity",value:e(s).maxQuantity,onInput:c,onKeyup:n[2]||(n[2]=a=>e(s).getProducts(1)),placeholder:"輸入最大存貨量"},null,40,lt)]),t("div",dt,[t("input",{class:"form-input",type:"number",maxlength:"50",id:"min",name:"min",value:e(s).min,onInput:c,onKeyup:n[3]||(n[3]=a=>e(s).getProducts(1)),placeholder:"輸入最小金額"},null,40,pt)]),t("div",mt,[t("input",{class:"form-input",type:"number",maxlength:"50",id:"max",name:"max",value:e(s).max,onInput:c,onKeyup:n[4]||(n[4]=a=>e(s).getProducts(1)),placeholder:"輸入最大金額"},null,40,_t)]),t("div",gt,[l(h,{class:"search-button",msg:"搜尋",backgroundColor:"background-color:#D0D0D0",type:"button",onClick:n[5]||(n[5]=a=>e(s).getProducts(1))}),l(h,{class:"clear-button",msg:"清除",backgroundColor:"background-color:	#FFAD86",type:"button",onClick:n[6]||(n[6]=a=>e(s).clearSearch())})])])]),t("div",vt,[l(G)]),l(et,{currentPage:e(s).currentPage},null,8,["currentPage"])]),l(H)],64))}},ft=$(ht,[["__scopeId","data-v-47c160bb"]]);export{ft as default};
