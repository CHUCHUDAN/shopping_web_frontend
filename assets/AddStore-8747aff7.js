import{u as x,r as b,o as g,b as S,c as y,d as e,e as a,w as F,n as C,F as k,p as w,h as B}from"./index-5c8cde34.js";import{_ as M,u as R,a as q,H as A,A as H,B as D,F as I,t as E,b as T}from"./FooterComponent-5e9215c1.js";import{u as V}from"./FormComponent.vue_vue_type_style_index_0_scoped_336c89d5_lang-5184f219.js";import{F as s}from"./FormComponent-a1c8ef37.js";const L=r=>(w("data-v-7ffba2e2"),r=r(),B(),r),N={class:"wrapper"},z={class:"form-wrapper"},O={class:"form-title"},P=L(()=>a("h3",null,"上架商品",-1)),j=["onSubmit"],G={__name:"AddStore",setup(r){const l=x(),n=R(),t=V(),u=q();n.clearErrorMessages(),n.clearSuccessMessages();const p=b(""),d=()=>{p.value="was-validated"};g(()=>{if(u.user.role!=="seller")return l.push("/")});const m=o=>{const i=o.target.files[0];t.avatar=i},f=async o=>{if(!o.target.checkValidity())return o.preventDefault();const _=E.putTokenToHeader(),v=await T.formDataPOST("/api/v1/stores",{name:t.name,price:t.price,inventory:t.inventory,avatar:t.avatar,description:t.description},_),{success:h,message:c}=v.data;if(!h)return n.setError(c);n.setSuccess(c),l.push("/stores")};return(o,i)=>(S(),y(k,null,[e(A),a("div",N,[a("div",z,[a("div",O,[P,e(H)]),a("form",{onSubmit:F(f,["prevent"]),class:C(p.value),novalidate:""},[e(s,{"label-for":"name","label-text":"商品名稱","span-text":"※填寫1-100字商品名稱","input-placeholder":"請輸入商品名稱","input-type":"text","min-length":"1","max-length":"100",inputRequired:"true","invalid-text":"此項目為必填，字數限制1-100"}),e(s,{"label-for":"price","label-text":"售價","span-text":"※注意售價為必填","input-placeholder":"請輸入售價","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填"}),e(s,{"label-for":"inventory","label-text":"存貨量","span-text":"※注意存貨量為必填","input-placeholder":"請輸入存貨量","input-type":"number",inputRequired:"true","invalid-text":"此項目為必填"}),e(s,{"label-for":"avatar","label-text":"商品圖片","span-text":"※注意商品圖片為必填","input-placeholder":"",onChange:m,"input-type":"file",inputRequired:"true","invalid-text":"此項目為必填"}),e(s,{"label-for":"description","label-text":"商品描述","span-text":"※注意商品描述為必填","input-placeholder":"請輸入商品描述","input-type":"textarea","min-length":"1","max-length":"400",inputRequired:"true","invalid-text":"此項目為必填"}),a("div",null,[e(D,{msg:"上架",backgroundColor:"background-color:#FFBD9D",type:"submit",onClick:d})])],42,j)])]),e(I)],64))}},W=M(G,[["__scopeId","data-v-7ffba2e2"]]);export{W as default};
