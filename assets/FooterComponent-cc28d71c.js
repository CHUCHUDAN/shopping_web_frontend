import{x as ne,A as oe,a as k,c as F,t as N,k as ue,e as v,d as y,l as W,F as ye,o as $e,r as ve,b as te,g as z,y as se,p as we,h as Me,z as Se}from"./index-7215024e.js";const le=ne("message",{state:()=>({errMessage:"",successMessage:""}),getters:{},actions:{setError(t){this.errMessage=t},setSuccess(t){this.successMessage=t},clearErrorMessages(){this.errMessage=""},clearSuccessMessages(){this.successMessage=""},messageInitialization(t=[]){if(t.some(c=>this.successMessage===c))return this.clearErrorMessages();this.clearErrorMessages(),this.clearSuccessMessages()}}}),be=ne("form-store",{state:()=>({name:"",price:"",inventory:"",avatar:"",description:"",account:"",password:"",passwordCheck:"",passwordOld:"",role:"buyer",email:"",phone:"",category:"",defautCategory:"",formClass:""}),getters:{},actions:{setChangeInput(t,n){this[t]=n},addFormClass(){window.scrollTo({top:0,behavior:"smooth"}),this.formClass="was-validated"}}}),V=t=>oe.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});async function ke(t,n,c){try{return await V(c).post(t,n)}catch(o){return o.response}}async function De(t,n,c){try{return await V(c).get(t,n)}catch(o){return o.response}}async function Ce(t,n,c){try{return await V(c).patch(t,n)}catch(o){return o.response}}async function Te(t,n,c){try{return await V(c).delete(t,n)}catch(o){return o.response}}async function Oe(t,n,c){try{return await V(c).put(t,n)}catch(o){return o.response}}const de=t=>oe.create({baseURL:"https://mighty-basin-45248-47d28e3aac56.herokuapp.com",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}});async function xe(t,n,c){try{return await de(c).post(t,n)}catch(o){return o.response}}async function He(t,n,c){try{return await de(c).put(t,n)}catch(o){return o.response}}const P={POST:ke,GET:De,PATCH:Ce,DELETE:Te,PUT:Oe,formDataPOST:xe,formDataPUT:He},fe=()=>{const t=localStorage.getItem("token");return oe.defaults.headers.common.Authorization=`Bearer ${t}`,t},Ie=async()=>{try{const t=fe();return await P.POST("/api/v1/users/tokenCheck",void 0,t)}catch(t){return t}},re={putTokenToHeader:fe,tokenCheck:Ie},b=le(),$=be(),Ee=ne("login",{state:()=>({isBuyer:!1,isSeller:!1,isUser:!1,cartButtonOn:!1,buttonText:"login",user:{},isSelfUser:""}),getters:{},actions:{async login(){const t=await P.POST("/api/v1/users/signin",{account:$.account,password:$.password}),{data:n,success:c,message:o}=t.data;if(!c)return b.setError(o),"err";localStorage.setItem("token",n.token),b.setSuccess("登入成功")},async authority(){const t=re.putTokenToHeader(),n=await P.GET("/api/v1/users",void 0,t),{success:c,data:o}=n.data;c||this.setLoginData(!1,!1,!1,!1,"","login"),c&&o.user.role==="buyer"?this.setLoginData(!0,!1,!0,!0,o.user,"logout"):c&&o.user.role==="seller"&&this.setLoginData(!1,!0,!0,!1,o.user,"logout")},logout(){this.buttonText==="logout"&&(b.setSuccess("登出成功"),localStorage.removeItem("token"),this.setLoginData(!1,!1,!1,!1,"","login"))},async register(){const t=await P.POST("/api/v1/user",{name:$.name,account:$.account,role:$.role,password:$.password,passwordCheck:$.passwordCheck}),{success:n,message:c}=t.data;if(!n)return b.setError(c),"err";b.setSuccess("註冊成功")},async putUser(){const t=re.putTokenToHeader(),n=await P.formDataPUT("/api/v1/users",{name:$.name,account:$.account,email:$.email,phone:$.phone,avatar:$.avatar},t),{success:c,message:o}=n.data;if(!c)return b.setError(o),"err";b.setSuccess(o)},async putUserPassword(){const t=re.putTokenToHeader(),n=await P.PUT("/api/v1/users/password",{passwordOld:$.passwordOld,password:$.password,passwordCheck:$.passwordCheck},t),{success:c,message:o}=n.data;if(!c)return b.setError(o),"err";b.setSuccess(o)},setLoginData(t,n,c,o,g,H){this.isBuyer=t,this.isSeller=n,this.isUser=c,this.cartButtonOn=o,this.user=g,this.buttonText=H}}});const R=(t,n)=>{const c=t.__vccOpts||t;for(const[o,g]of n)c[o]=g;return c},Ae={__name:"ButtonComponent",props:{msg:{type:String,required:!0},backgroundColor:{type:String,required:!0}},setup(t){return(n,c)=>(k(),F("button",{style:ue(t.backgroundColor)},N(t.msg),5))}},Be=R(Ae,[["__scopeId","data-v-bd44fc22"]]);const Le={key:0,class:"alert-wrapper"},Pe={class:"alert-message success-color"},Fe={class:"text"},Ue={key:1,class:"alert-wrapper"},Ye={class:"alert-message error-color"},je={class:"text"},ze={__name:"AlertComponent",setup(t){const n=le();return(c,o)=>(k(),F(ye,null,[v(n).successMessage?(k(),F("div",Le,[y("div",Pe,[y("div",Fe,N(v(n).successMessage),1),y("button",{type:"button",class:"close-button success-color",onClick:o[0]||(o[0]=(...g)=>v(n).clearSuccessMessages&&v(n).clearSuccessMessages(...g))},"X")])])):W("",!0),v(n).errMessage?(k(),F("div",Ue,[y("div",Ye,[y("div",je,N(v(n).errMessage),1),y("button",{type:"button",class:"close-button error-color",onClick:o[1]||(o[1]=(...g)=>v(n).clearErrorMessages&&v(n).clearErrorMessages(...g))},"X")])])):W("",!0)],64))}},at=R(ze,[["__scopeId","data-v-0df4cebf"]]),We="/shopping_web_frontend/assets/shark_logo-af2be115.png";const X=t=>(we("data-v-39235f8e"),t=t(),Me(),t),Ne={class:"title-wrapper"},Ve=X(()=>y("img",{class:"logo-img",src:We,alt:"圖片未正確顯示"},null,-1)),Je=X(()=>y("div",{class:"logo-text"},"丹尼購物",-1)),Ze={class:"func-wrapper"},qe={class:"user-account"},Ge=X(()=>y("i",{class:"fa-solid fa-cart-shopping"},null,-1)),Re=X(()=>y("i",{class:"fa-solid fa-store"},null,-1)),Xe={__name:"HeaderComponent",setup(t){const n=Ee();return $e(async()=>{await n.authority()}),(c,o)=>{const g=ve("router-link");return k(),F("header",null,[y("div",Ne,[te(g,{to:"/",class:"title"},{default:z(()=>[Ve,Je]),_:1})]),y("div",Ze,[v(n).isUser?(k(),se(g,{key:0,to:"/user/profile",class:"userPic"},{default:z(()=>[y("div",{class:"user-pic",style:ue(`background-image: url('${v(n).user.avatar}')`)},null,4),y("div",qe,N(v(n).user.account),1)]),_:1})):W("",!0),v(n).isBuyer?(k(),se(g,{key:1,to:"/carts",class:"cartPic"},{default:z(()=>[Ge]),_:1})):W("",!0),v(n).isSeller?(k(),se(g,{key:2,to:"/stores",class:"storePic"},{default:z(()=>[Re]),_:1})):W("",!0),te(g,{to:"/user/login",class:"user-login-wrapper",onClick:o[0]||(o[0]=H=>v(n).logout())},{default:z(()=>[te(Be,{msg:v(n).buttonText,backgroundColor:"background-color:#FFBD9D"},null,8,["msg"])]),_:1})])])}}},it=R(Xe,[["__scopeId","data-v-39235f8e"]]);var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var he={exports:{}};(function(t,n){(function(c,o){t.exports=o()})(Qe,function(){var c=1e3,o=6e4,g=36e5,H="millisecond",I="second",E="minute",A="hour",D="day",J="week",M="month",ae="quarter",C="year",B="date",ie="Invalid Date",pe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_e=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ge={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Q=function(a,r,e){var i=String(a);return!i||i.length>=r?a:""+Array(r+1-i.length).join(e)+a},me={s:Q,z:function(a){var r=-a.utcOffset(),e=Math.abs(r),i=Math.floor(e/60),s=e%60;return(r<=0?"+":"-")+Q(i,2,"0")+":"+Q(s,2,"0")},m:function a(r,e){if(r.date()<e.date())return-a(e,r);var i=12*(e.year()-r.year())+(e.month()-r.month()),s=r.clone().add(i,M),l=e-s<0,u=r.clone().add(i+(l?-1:1),M);return+(-(i+(e-s)/(l?s-u:u-s))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M,y:C,w:J,d:D,D:B,h:A,m:E,s:I,ms:H,Q:ae}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},U="en",x={};x[U]=ge;var K=function(a){return a instanceof q},Z=function(a,r,e){var i;if(!a)return U;if(typeof a=="string")x[a]&&(i=a),r&&(x[a]=r,i=a);else{var s=a.name;x[s]=a,i=s}return!e&&i&&(U=i),i||!e&&U},_=function(a,r){if(K(a))return a.clone();var e=typeof r=="object"?r:{};return e.date=a,e.args=arguments,new q(e)},d=me;d.l=Z,d.i=K,d.w=function(a,r){return _(a,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var q=function(){function a(e){this.$L=Z(e.locale,null,!0),this.parse(e)}var r=a.prototype;return r.parse=function(e){this.$d=function(i){var s=i.date,l=i.utc;if(s===null)return new Date(NaN);if(d.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(pe);if(u){var f=u[2]-1||0,p=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)):new Date(u[1],f,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)}}return new Date(s)}(e),this.$x=e.x||{},this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return d},r.isValid=function(){return this.$d.toString()!==ie},r.isSame=function(e,i){var s=_(e);return this.startOf(i)<=s&&s<=this.endOf(i)},r.isAfter=function(e,i){return _(e)<this.startOf(i)},r.isBefore=function(e,i){return this.endOf(i)<_(e)},r.$g=function(e,i,s){return d.u(e)?this[i]:this.set(s,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,i){var s=this,l=!!d.u(i)||i,u=d.p(e),f=function(L,w){var O=d.w(s.$u?Date.UTC(s.$y,w,L):new Date(s.$y,w,L),s);return l?O:O.endOf(D)},p=function(L,w){return d.w(s.toDate()[L].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(w)),s)},h=this.$W,m=this.$M,T=this.$D,S="set"+(this.$u?"UTC":"");switch(u){case C:return l?f(1,0):f(31,11);case M:return l?f(1,m):f(0,m+1);case J:var Y=this.$locale().weekStart||0,j=(h<Y?h+7:h)-Y;return f(l?T-j:T+(6-j),m);case D:case B:return p(S+"Hours",0);case A:return p(S+"Minutes",1);case E:return p(S+"Seconds",2);case I:return p(S+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,i){var s,l=d.p(e),u="set"+(this.$u?"UTC":""),f=(s={},s[D]=u+"Date",s[B]=u+"Date",s[M]=u+"Month",s[C]=u+"FullYear",s[A]=u+"Hours",s[E]=u+"Minutes",s[I]=u+"Seconds",s[H]=u+"Milliseconds",s)[l],p=l===D?this.$D+(i-this.$W):i;if(l===M||l===C){var h=this.clone().set(B,1);h.$d[f](p),h.init(),this.$d=h.set(B,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},r.set=function(e,i){return this.clone().$set(e,i)},r.get=function(e){return this[d.p(e)]()},r.add=function(e,i){var s,l=this;e=Number(e);var u=d.p(i),f=function(m){var T=_(l);return d.w(T.date(T.date()+Math.round(m*e)),l)};if(u===M)return this.set(M,this.$M+e);if(u===C)return this.set(C,this.$y+e);if(u===D)return f(1);if(u===J)return f(7);var p=(s={},s[E]=o,s[A]=g,s[I]=c,s)[u]||1,h=this.$d.getTime()+e*p;return d.w(h,this)},r.subtract=function(e,i){return this.add(-1*e,i)},r.format=function(e){var i=this,s=this.$locale();if(!this.isValid())return s.invalidDate||ie;var l=e||"YYYY-MM-DDTHH:mm:ssZ",u=d.z(this),f=this.$H,p=this.$m,h=this.$M,m=s.weekdays,T=s.months,S=function(w,O,ee,G){return w&&(w[O]||w(i,l))||ee[O].substr(0,G)},Y=function(w){return d.s(f%12||12,w,"0")},j=s.meridiem||function(w,O,ee){var G=w<12?"AM":"PM";return ee?G.toLowerCase():G},L={YY:String(this.$y).slice(-2),YYYY:this.$y,M:h+1,MM:d.s(h+1,2,"0"),MMM:S(s.monthsShort,h,T,3),MMMM:S(T,h),D:this.$D,DD:d.s(this.$D,2,"0"),d:String(this.$W),dd:S(s.weekdaysMin,this.$W,m,2),ddd:S(s.weekdaysShort,this.$W,m,3),dddd:m[this.$W],H:String(f),HH:d.s(f,2,"0"),h:Y(1),hh:Y(2),a:j(f,p,!0),A:j(f,p,!1),m:String(p),mm:d.s(p,2,"0"),s:String(this.$s),ss:d.s(this.$s,2,"0"),SSS:d.s(this.$ms,3,"0"),Z:u};return l.replace(_e,function(w,O){return O||L[w]||u.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,i,s){var l,u=d.p(i),f=_(e),p=(f.utcOffset()-this.utcOffset())*o,h=this-f,m=d.m(this,f);return m=(l={},l[C]=m/12,l[M]=m,l[ae]=m/3,l[J]=(h-p)/6048e5,l[D]=(h-p)/864e5,l[A]=h/g,l[E]=h/o,l[I]=h/c,l)[u]||h,s?m:d.a(m)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return x[this.$L]},r.locale=function(e,i){if(!e)return this.$L;var s=this.clone(),l=Z(e,i,!0);return l&&(s.$L=l),s},r.clone=function(){return d.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},a}(),ce=q.prototype;return _.prototype=ce,[["$ms",H],["$s",I],["$m",E],["$H",A],["$W",D],["$M",M],["$y",C],["$D",B]].forEach(function(a){ce[a[1]]=function(r){return this.$g(r,a[0],a[1])}}),_.extend=function(a,r){return a.$i||(a(r,q,_),a.$i=!0),_},_.locale=Z,_.isDayjs=K,_.unix=function(a){return _(1e3*a)},_.en=x[U],_.Ls=x,_.p={},_})})(he);var et=he.exports;const tt=Ke(et);const st={class:"year-wrapper"},rt={class:"year"},nt={__name:"FooterComponent",setup(t){const n=Se(tt().year());return(c,o)=>(k(),F("footer",null,[y("div",st,[y("span",rt,"© 2022-"+N(n.value),1)])]))}},ct=R(nt,[["__scopeId","data-v-b8a0bbd6"]]);export{at as A,Be as B,ct as F,it as H,R as _,be as a,Ee as b,P as c,re as t,le as u};
